(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fa150252"],{"0371":function(t,e,o){"use strict";o("1420")},"0f28":function(t,e,o){"use strict";function a(){var t="".concat(window.location.origin).concat("/prod-api","/up/img");return t}o.d(e,"a",(function(){return a}))},1420:function(t,e,o){},"23ba":function(t,e,o){"use strict";o.d(e,"a",(function(){return l}));var a=o("b775");function l(t){return Object(a["a"])({url:"company/company/getGroup",method:"get",params:t})}},"4bbd":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container"},[o("el-form",{ref:"postForm",attrs:{model:t.postForm,"label-width":"120px"}},[o("el-tabs",{staticStyle:{padding:"15px 0"}},[o("span",{staticStyle:{display:"inline-block",float:"left",height:"29px","line-height":"29px"}},[t._v("商品基本信息")]),t._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"所属公司："}},[o("el-select",{class:[null!=t.postForm.self_id?"disabled":""],staticStyle:{width:"300px"},attrs:{placeholder:"请选择所属公司"},on:{change:t.onGroupChanged},model:{value:t.postForm.group_code,callback:function(e){t.$set(t.postForm,"group_code",e)},expression:"postForm.group_code"}},t._l(t.groupOptions,(function(t){return o("el-option",{key:t.group_code,attrs:{value:t.group_code,label:t.group_name}})})),1)],1)],1)],1),t._v(" "),o("el-tabs",{attrs:{type:"border-card"}},[o("el-tab-pane",{attrs:{label:"商品基本信息"}},[o("el-row",[o("el-col",{staticStyle:{"margin-top":"5px"},attrs:{span:6}},[o("el-form-item",{attrs:{label:"业务类型："}},[o("el-select",{attrs:{placeholder:"请选择业务类型"},model:{value:t.postForm.good_type,callback:function(e){t.$set(t.postForm,"good_type",e)},expression:"postForm.good_type"}},t._l(t.goodTypeOptions,(function(t){return o("el-option",{key:t.key,attrs:{value:t.key,label:t.name}})})),1)],1)],1),t._v(" "),o("el-col",{staticStyle:{"margin-top":"5px"},attrs:{span:6}},[o("el-form-item",{attrs:{label:"商品状态："}},[o("el-select",{attrs:{placeholder:"请选择商品状态"},model:{value:t.postForm.good_status,callback:function(e){t.$set(t.postForm,"good_status",e)},expression:"postForm.good_status"}},t._l(t.goodStatusOptions,(function(t){return o("el-option",{key:t.key,attrs:{value:t.key,label:t.name}})})),1)],1)],1),t._v(" "),o("el-col",{staticStyle:{"margin-top":"5px"},attrs:{span:6}},[o("el-form-item",{attrs:{label:"能否代售："}},[o("el-select",{attrs:{placeholder:"请选择能否代售"},model:{value:t.postForm.commissioned_flag,callback:function(e){t.$set(t.postForm,"commissioned_flag",e)},expression:"postForm.commissioned_flag"}},[o("el-option",{attrs:{label:"是",value:"Y"}}),t._v(" "),o("el-option",{attrs:{label:"否",value:"N"}})],1)],1)],1),t._v(" "),o("el-col",{staticStyle:{"margin-top":"5px"},attrs:{span:24}},[o("el-form-item",{attrs:{label:"产品名称："}},[o("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.postForm.good_name,callback:function(e){t.$set(t.postForm,"good_name",e)},expression:"postForm.good_name"}})],1)],1),t._v(" "),o("el-col",{staticStyle:{"margin-top":"5px"},attrs:{span:24}},[o("el-form-item",{attrs:{label:"产品标题："}},[o("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.postForm.good_title,callback:function(e){t.$set(t.postForm,"good_title",e)},expression:"postForm.good_title"}})],1)],1),t._v(" "),o("el-col",{staticStyle:{"margin-top":"5px"},attrs:{span:24}},[o("el-form-item",{attrs:{label:"产品描述："}},[o("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.postForm.good_describe,callback:function(e){t.$set(t.postForm,"good_describe",e)},expression:"postForm.good_describe"}})],1)],1)],1)],1),t._v(" "),o("el-tab-pane",{attrs:{label:"商品分类"}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"产品分类："}},[o("el-select",{staticStyle:{width:"350px"},attrs:{filterable:"",placeholder:"请选择产品分类"},model:{value:t.postForm.classify_id,callback:function(e){t.$set(t.postForm,"classify_id",e)},expression:"postForm.classify_id"}},t._l(t.classifyOptions,(function(e){return o("el-option-group",{key:e.self_id,staticStyle:{"font-size":"16px"},attrs:{label:e.name}},t._l(e.children,(function(t){return o("el-option",{key:t.self_id,staticStyle:{"margin-left":"10px"},attrs:{label:t.name,value:t.self_id}})})),1)})),1)],1)],1)],1)],1),t._v(" "),o("el-tab-pane",{attrs:{label:"商品标签"}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"标签类型："}},[o("el-select",{staticStyle:{width:"350px"},attrs:{placeholder:"请选择能否代售"},on:{change:t.onChangelabel},model:{value:t.postForm.label_flag,callback:function(e){t.$set(t.postForm,"label_flag",e)},expression:"postForm.label_flag"}},[o("el-option",{attrs:{label:"文字",value:"text"}}),t._v(" "),o("el-option",{attrs:{label:"图片",value:"img"}}),t._v(" "),o("el-option",{attrs:{label:"无类型",value:"N"}})],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"标签内容："}},[o("el-input",{directives:[{name:"show",rawName:"v-show",value:t.label1,expression:"label1"}],staticStyle:{width:"350px"},attrs:{placeholder:"请输入内容"},model:{value:t.postForm.label_text,callback:function(e){t.$set(t.postForm,"label_text",e)},expression:"postForm.label_text"}}),t._v(" "),o("image-upload",{directives:[{name:"show",rawName:"v-show",value:t.label2,expression:"label2"}],staticClass:"lable_img",attrs:{imageKey:"label_image_url",showLimit:!1,limit:1,title:"",list:t.postForm.label_image_url},on:{update:t.onImagesUpdate2}})],1),t._v(" "),o("el-form-item",{attrs:{label:"标签生效时间："}},[o("div",{staticClass:"block"},[o("el-date-picker",{staticStyle:{width:"350px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:t.postForm.label_start_time,callback:function(e){t.$set(t.postForm,"label_start_time",e)},expression:"postForm.label_start_time"}})],1)]),t._v(" "),o("el-form-item",{attrs:{label:"标签结束时间："}},[o("div",{staticClass:"block"},[o("el-date-picker",{staticStyle:{width:"350px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:t.postForm.label_end_time,callback:function(e){t.$set(t.postForm,"label_end_time",e)},expression:"postForm.label_end_time"}})],1)])],1)],1)],1),t._v(" "),o("el-tab-pane",{attrs:{label:"售卖设置"}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"价格显示："}},[o("el-select",{staticStyle:{width:"350px"},attrs:{placeholder:"价格显示"},model:{value:t.postForm.price_show_flag,callback:function(e){t.$set(t.postForm,"price_show_flag",e)},expression:"postForm.price_show_flag"}},[o("el-option",{attrs:{label:"显示单个最低价格",value:"A"}}),t._v(" "),o("el-option",{attrs:{label:"显示区间价格",value:"Q"}})],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"库存计算："}},[o("el-select",{staticStyle:{width:"350px"},attrs:{placeholder:"库存计算"},model:{value:t.postForm.sku_flag,callback:function(e){t.$set(t.postForm,"sku_flag",e)},expression:"postForm.sku_flag"}},[o("el-option",{attrs:{label:"每个SKU单独计算库存",value:"D"}}),t._v(" "),o("el-option",{attrs:{label:"所有SKU计算商品库存",value:"T"}})],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"售卖开始时间："}},[o("div",{staticClass:"block"},[o("el-date-picker",{staticStyle:{width:"350px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:t.postForm.sell_start_time,callback:function(e){t.$set(t.postForm,"sell_start_time",e)},expression:"postForm.sell_start_time"}})],1)]),t._v(" "),o("el-form-item",{attrs:{label:"售卖结束时间："}},[o("div",{staticClass:"block"},[o("el-date-picker",{staticStyle:{width:"350px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:t.postForm.sell_end_time,callback:function(e){t.$set(t.postForm,"sell_end_time",e)},expression:"postForm.sell_end_time"}})],1)]),t._v(" "),o("el-form-item",{attrs:{label:"核销状态："}},[o("el-select",{staticStyle:{width:"350px"},attrs:{placeholder:"核销状态"},model:{value:t.postForm.check_flag,callback:function(e){t.$set(t.postForm,"check_flag",e)},expression:"postForm.check_flag"}},[o("el-option",{attrs:{label:"可核销",value:"Y"}}),t._v(" "),o("el-option",{attrs:{label:"不可核销",value:"N"}})],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"点击跳转："}},[o("el-select",{staticStyle:{width:"350px"},attrs:{placeholder:"点击跳转"},model:{value:t.postForm.jump_flag,callback:function(e){t.$set(t.postForm,"jump_flag",e)},expression:"postForm.jump_flag"}},[o("el-option",{attrs:{label:"跳转",value:"Y"}}),t._v(" "),o("el-option",{attrs:{label:"不跳转",value:"N"}})],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"商品购买属性："}},[o("el-select",{staticStyle:{width:"350px"},attrs:{placeholder:"商品购买属性"},model:{value:t.postForm.cart_flag,callback:function(e){t.$set(t.postForm,"cart_flag",e)},expression:"postForm.cart_flag"}},[o("el-option",{attrs:{label:"全部",value:"all"}}),t._v(" "),o("el-option",{attrs:{label:"购物车购买",value:"cart"}}),t._v(" "),o("el-option",{attrs:{label:"单独购买",value:"alone"}})],1)],1)],1)],1)],1),t._v(" "),o("el-tab-pane",{attrs:{label:"商品规格"}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"单位数："}},[o("el-input",{attrs:{placeholder:"例如：1"},model:{value:t.postForm.unit_number,callback:function(e){t.$set(t.postForm,"unit_number",e)},expression:"postForm.unit_number"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"单位："}},[o("el-input",{attrs:{placeholder:"例如：份"},model:{value:t.postForm.unit,callback:function(e){t.$set(t.postForm,"unit",e)},expression:"postForm.unit"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"规格描述："}},[o("el-input",{attrs:{placeholder:"例如：480g"},model:{value:t.postForm.unit_description,callback:function(e){t.$set(t.postForm,"unit_description",e)},expression:"postForm.unit_description"}})],1)],1)],1)],1)],1),t._v(" "),o("el-tabs",{staticStyle:{padding:"5px 0"}},[o("span",{staticStyle:{display:"inline-block",float:"left",height:"29px","line-height":"29px"}},[t._v("商品图片信息")])]),t._v(" "),o("el-tabs",{attrs:{type:"border-card"}},t._l(t.keyInfo,(function(e){return o("el-tab-pane",{key:e.key,attrs:{label:e.name}},[o("image-upload",{attrs:{imageKey:e.key,showLimit:!0,limit:parseInt(e.count),title:e.name,list:e.images},on:{update:t.onImagesUpdate}})],1)})),1),t._v(" "),o("el-tabs",{staticStyle:{padding:"5px 0"}},[o("span",{staticStyle:{display:"inline-block",float:"left",height:"29px","line-height":"29px"}},[t._v("商品SKU")])]),t._v(" "),o("el-card",{staticClass:"box-card"},[o("section",[o("div",{staticClass:"flex-space-between table-title-container"},[o("div"),t._v(" "),o("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.onSkuAddClick()}}},[t._v("新增")])],1),t._v(" "),o("el-table",{staticClass:"myTable",staticStyle:{width:"100%"},attrs:{data:t.postForm.erp_shop_goods_sku,border:"",fit:""}},[o("el-table-column",{attrs:{type:"index",index:t.indexMethod}}),t._v(" "),o("el-table-column",{attrs:{label:"名称"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[o("el-input",{attrs:{placeholder:"名称",value:a.good_name},model:{value:a.good_name,callback:function(e){t.$set(a,"good_name",e)},expression:"row.good_name"}})]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"销售价",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[o("el-input",{attrs:{placeholder:"销售价",value:a.sale_price},model:{value:a.sale_price,callback:function(e){t.$set(a,"sale_price",e)},expression:"row.sale_price"}})]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"代售价",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[o("el-input",{attrs:{placeholder:"代售价",value:a.commissioned_price},model:{value:a.commissioned_price,callback:function(e){t.$set(a,"commissioned_price",e)},expression:"row.commissioned_price"}})]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"成本价",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[o("el-input",{attrs:{placeholder:"成本价",value:a.cost_price},model:{value:a.cost_price,callback:function(e){t.$set(a,"cost_price",e)},expression:"row.cost_price"}})]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"数量",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[o("el-input",{attrs:{placeholder:"数量",value:a.sell_number},model:{value:a.sell_number,callback:function(e){t.$set(a,"sell_number",e)},expression:"row.sell_number"}})]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"图片",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[o("el-input",{attrs:{placeholder:"图片",value:a.thum_image_url},model:{value:a.cost_prthum_image_urlice,callback:function(e){t.$set(a,"cost_prthum_image_urlice",e)},expression:"row.cost_prthum_image_urlice"}})]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作",align:"center",width:"100","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row,l=e.$index;return[o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.onSkuDeleteClick(a,l)}}},[t._v("删除")])]}}])})],1)],1)]),t._v(" "),o("el-form-item",{staticStyle:{"text-align":"center","margin-left":"0"}},[o("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),t._v(" "),o("el-button",{on:{click:function(e){return t.$router.go(-1)}}},[t._v("取消")])],1)],1)],1)},l=[],s=(o("ac6a"),o("ade3")),r=o("61f7"),i=o("a2a9"),n=o("23ba"),c=o("0835"),u=o("fa2f"),p={self_id:"",group_code:"",good_name:"",good_title:"",good_type:"",classify_id:"",good_describe:"",good_status:"Y",sell_start_time:"",sell_end_time:"",thum_image_url:[],scroll_image_url:[],details_image_url:[],label_image_url:[],label_flag:"text",label_start_time:"",label_end_time:"",price_show_flag:"A",cart_flag:"all",commissioned_flag:"Y",sku_flag:"D",check_flag:"Y",jump_flag:"Y",unit_number:"",unit:"",unit_description:"",erp_shop_goods_sku:[{good_name:"",cost_price:"",commissioned_price:"",sale_price:"",thum_image_url:""}],good_info:{}},d={name:"ArticleDetail",components:{ImageUpload:c["a"]},data:function(){var t=this,e=function(e,o,a){""===o?(t.$message({message:e.field+"为必传项",type:"error"}),a(new Error(e.field+"为必传项"))):a()},o=function(e,o,a){o?Object(r["validURL"])(o)?a():(t.$message({message:"外链url填写不正确",type:"error"}),a(new Error("外链url填写不正确"))):a()};return{isEdit:!1,postForm:Object.assign({},p),loading:!1,groupOptions:[],goodTypeOptions:[],goodStatusOptions:[],classifyOptions:[],label1:!0,label2:!1,keyInfo:[],rules:Object(s["a"])({image_uri:[{validator:e}],title:[{validator:e}],content:[{validator:e}],source_uri:[{validator:o,trigger:"blur"}],type:[{required:!0,message:"type is required",trigger:"change"}],timestamp:[{type:"date",required:!0,message:"timestamp is required",trigger:"change"}]},"title",[{required:!0,message:"title is required",trigger:"blur"}]),tempRoute:{}}},computed:{contentShortLength:function(){return this.postForm.content_short.length},displayTime:{get:function(){return+new Date(this.postForm.display_time)},set:function(t){this.postForm.display_time=new Date(t)}}},created:function(){var t=this,e=this.$route.query&&this.$route.query.id;this.isEdit=void 0!=e,this.postForm.self_id=e,Object(n["a"])().then((function(e){t.groupOptions=e.data.items,t.postForm.group_code=t.groupOptions[0].group_code,t.onGroupChanged(t.postForm.group_code)})),Object(i["f"])(e).then((function(e){switch(t.goodStatusOptions=e.data.good_status,t.goodTypeOptions=e.data.good_type,null!=e.data.goods_info?(t.postForm=e.data.goods_info,null!=e.data.goods_info.good_info&&(t.postForm.unit=e.data.goods_info.good_info.unit,t.postForm.unit_description=e.data.goods_info.good_info.unit_description,t.postForm.unit_number=e.data.goods_info.good_info.unit_number),t.postForm.label_flag=e.data.goods_info.label_info.label_flag,t.postForm.label_image_url=e.data.goods_info.label_info.label_image_url,t.postForm.label_start_time=e.data.goods_info.label_info.label_start_time,t.postForm.label_end_time=e.data.goods_info.label_info.label_end_time,t.onGroupChanged(t.postForm.group_code)):(t.postForm.good_type=e.data.good_type[0].key,t.postForm.good_status=e.data.good_status[0].key,t.postForm.commissioned_flag="Y"),t.keyInfo=e.data.key_info.map((function(e){return e.images=t.postForm[e.key]?t.postForm[e.key]:[],e})),t.postForm.label_flag){case"text":t.label1=!0,t.label2=!1;break;case"img":t.label1=!1,t.label2=!0;break;default:t.label1=!0,t.label2=!1;break}console.log(t.postForm)})),this.tempRoute=Object.assign({},this.$route)},methods:{indexMethod:function(t){return t+1},fetchData:function(t){},setTagsViewTitle:function(){var t="Edit Article",e=Object.assign({},this.tempRoute,{title:"".concat(t,"-").concat(this.postForm.id)});this.$store.dispatch("tagsView/updateVisitedView",e)},onGroupChanged:function(t){var e=this,o={type:"classify",group_code:t};Object(u["g"])(o).then((function(t){e.classifyOptions=t.data}))},onImagesUpdate:function(t){this.keyInfo.forEach((function(e){e.key==t.imageKey&&(e.images=t.images)}))},onImagesUpdate2:function(t){this.postForm.label_image_url=t.images},onChangelabel:function(){switch(this.postForm.label_flag){case"text":this.label1=!0,this.label2=!1;break;case"img":this.label1=!1,this.label2=!0;break;default:this.label1=!0,this.label2=!1;break}},onSkuAddClick:function(){this.postForm.erp_shop_goods_sku.push({good_name:"",cost_price:"",commissioned_price:"",sale_price:"",thum_image_url:""})},onSkuDeleteClick:function(t,e){this.postForm.erp_shop_goods_sku.splice(e,1)},onSubmit:function(){var t=this,e=this.keyInfo.reduce((function(t,e){return t[e.key]=e.images,t}),{});switch(this.postForm.good_type){case"o2o":this.postForm.good_info={unit_number:this.postForm.unit_number,unit:this.postForm.unit,unit_description:this.postForm.unit_description};break;case"stock":break}Object.assign(this.postForm,e),""==this.postForm.classify_id?this.$message({message:"产品分类不能为空",type:"warning",center:!0}):this.$refs.postForm.validate((function(e){if(!e)return!1;t.loading=!0,console.log(t.postForm),Object(i["a"])(t.postForm).then((function(e){t.$notify({title:"成功",message:"商品编辑成功！",type:"success",duration:2e3}),setTimeout((function(){t.$router.go(-1)}),1e3)})),t.loading=!1}))}}},m=d,_=(o("0371"),o("ab6f"),o("2877")),f=Object(_["a"])(m,a,l,!1,null,"15d033bb",null);e["default"]=f.exports},a2a9:function(t,e,o){"use strict";o.d(e,"g",(function(){return l})),o.d(e,"h",(function(){return s})),o.d(e,"c",(function(){return r})),o.d(e,"b",(function(){return i})),o.d(e,"f",(function(){return n})),o.d(e,"a",(function(){return c}));var a=o("b775");function l(t){return Object(a["a"])({url:"/goods/goods/goodsList",method:"get",params:t})}function s(t){return Object(a["a"])({url:"/goods/goods/goodsPage",method:"get",params:t})}function r(t){return Object(a["a"])({url:"/goods/goods/goodsDeleteFlag",method:"post",data:{self_id:t}})}function i(t){return Object(a["a"])({url:"/goods/goods/goodsStatusFlag",method:"post",data:{self_id:t}})}function n(t){return Object(a["a"])({url:"/goods/goods/createGoods",method:"get",params:{self_id:t}})}function c(t){return Object(a["a"])({url:"/goods/goods/addGoods",method:"post",data:t})}},a630:function(t,e,o){},ab6f:function(t,e,o){"use strict";o("a630")},fa2f:function(t,e,o){"use strict";o.d(e,"c",(function(){return l})),o.d(e,"d",(function(){return s})),o.d(e,"a",(function(){return r})),o.d(e,"f",(function(){return i})),o.d(e,"e",(function(){return n})),o.d(e,"b",(function(){return c})),o.d(e,"g",(function(){return u}));var a=o("b775");function l(t){return Object(a["a"])({url:"/attributeList",method:"get",params:t})}function s(t){return Object(a["a"])({url:"/attributePage",method:"get",params:t})}function r(t){return Object(a["a"])({url:"/addAttribute",method:"post",data:t})}function i(t){return Object(a["a"])({url:"/createAttribute",method:"post",data:t})}function n(t){return Object(a["a"])({url:"/attributeUseFlag",method:"post",data:{self_id:t}})}function c(t){return Object(a["a"])({url:"/attributeDelFlag",method:"post",data:{self_id:t}})}function u(t){return Object(a["a"])({url:"/getAttribute",method:"post",data:t})}}}]);