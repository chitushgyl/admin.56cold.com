(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60691106"],{"077d":function(e,t,a){"use strict";a("e87a")},"09f4":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),Math.easeInOutQuad=function(e,t,a,n){return e/=n/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function l(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function o(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function i(e,t,a){var i=o(),s=e-i,r=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=r;var o=Math.easeInOutQuad(c,i,s,t);l(o),c<t?n(e):a&&"function"===typeof a&&a()};u()}},"218a":function(e,t,a){},"23ba":function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a("b775");function l(e){return Object(n["a"])({url:"company/company/getGroup",method:"get",params:e})}},"396f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"table-header header-fixed"},[a("div",{staticClass:"flex-space-between table-title-container"},[a("div",[e._v("请假列表")]),e._v(" "),a("div",e._l(e.thButtonInfo,(function(t){return a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],key:t.id,staticClass:"filter-item",style:[{backgroundColor:t.color,color:"white"}],attrs:{size:"mini",icon:t.img},on:{click:function(a){return e.onThBtnClick(t)}}},[e._v("\n          "+e._s("icon"==t.show_flag?null:t.name)+"\n        ")])})),1)]),e._v(" "),a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{placeholder:"公司名称"},model:{value:e.listQuery.group_name,callback:function(t){e.$set(e.listQuery,"group_name",t)},expression:"listQuery.group_name"}}),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{placeholder:"姓名"},model:{value:e.listQuery.person_name,callback:function(t){e.$set(e.listQuery,"person_name",t)},expression:"listQuery.person_name"}}),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{placeholder:"年级"},model:{value:e.listQuery.grade_name,callback:function(t){e.$set(e.listQuery,"grade_name",t)},expression:"listQuery.grade_name"}}),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{placeholder:"班级"},model:{value:e.listQuery.class_name,callback:function(t){e.$set(e.listQuery,"class_name",t)},expression:"listQuery.class_name"}}),e._v(" "),a("el-date-picker",{staticClass:"filter-item",attrs:{type:"date",placeholder:"请假时间","value-format":"yyyy-MM-dd"},model:{value:e.listQuery.holiday_date,callback:function(t){e.$set(e.listQuery,"holiday_date",t)},expression:"listQuery.holiday_date"}}),e._v(" "),a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请假类型"},model:{value:e.listQuery.holiday_type,callback:function(t){e.$set(e.listQuery,"holiday_type",t)},expression:"listQuery.holiday_type"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"上学",value:"UP"}}),e._v(" "),a("el-option",{attrs:{label:"放学",value:"DOWN"}})],1),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onFilter}},[e._v("\n        查找\n      ")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[null!==e.group_show&&"Y"==e.group_show?a("el-table-column",{attrs:{label:"所属公司",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.group_name))])]}}],null,!1,967676227)}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"学生信息",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",{staticStyle:{display:"inline-block",width:"70px"}},[e._v(e._s(n.person_name))]),e._v(" "),a("span",[e._v(e._s(n.grade_name)+" "+e._s(n.class_name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"请假时间",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.holiday_date)+"　"+e._s(n.holiday_type))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"请假原因","min-width":"150px",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.school_holiday?n.school_holiday.reason:""))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"请假人",align:"center","min-width":"190"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.school_holiday?n.school_holiday.create_user_name:"")+"　"+e._s(n.create_time))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"取消请假",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-tooltip",{attrs:{placement:"left"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("撤销原因："),a("br"),e._v(e._s(n.cancel_reason)+" "),a("br"),e._v("撤销人："),a("br"),e._v(" "+e._s(n.cancel_user_name)+" "+e._s(n.cancel_time))]),e._v(" "),a("span",[e._v(e._s("N"==n.use_flag?"已取消":""))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"230","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,l=t.$index;return e._l(n.button_info,(function(t){return a("div",{key:t.id,staticStyle:{display:"inline-block"}},["text"==t.show_flag&&null==t.img?a("el-button",{staticStyle:{padding:"3px"},attrs:{size:"mini",plain:"",type:t.but_type,disabled:"N"==n.use_flag},on:{click:function(a){return e.onRowBtnClick(n,l,t)}}},[e._v(e._s(t.name))]):e._e(),e._v(" "),"icon"==t.show_flag?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.name,placement:"bottom-start"}},[a("el-button",{attrs:{type:t.but_type,icon:t.img,circle:""},on:{click:function(a){return e.onRowBtnClick(n,l,t)}}})],1):a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.name,placement:"bottom-start"}},[a("i",{class:t.img,style:[{marginRight:"5px",color:t.color,fontSize:"15px"}],attrs:{size:"mini",circle:""},on:{click:function(a){return e.onRowBtnClick(n,l,t)}}})])],1)}))}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.num},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"num",t)},pagination:e.getList}}),e._v(" "),a("el-dialog",{attrs:{title:"导出请假数据",visible:e.dialogFormVisible,width:"550px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",[a("label",[e._v("选择公司：")]),e._v(" "),a("el-select",{staticStyle:{width:"400px",margin:"10px 0"},attrs:{placeholder:"请选择"},model:{value:e.self_id,callback:function(t){e.self_id=t},expression:"self_id"}},e._l(e.groupOption,(function(e){return a("el-option",{key:e.self_id,attrs:{label:e.group_name,value:e.self_id}})})),1)],1),e._v(" "),a("div",[a("label",[e._v("时间区间：")]),e._v(" "),a("div",{staticClass:"block",staticStyle:{display:"inline-block","vertical-align":"middle","margin-bottom":"10px"}},[a("el-date-picker",{attrs:{type:"daterange",editable:!1,"value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.holidayTime,callback:function(t){e.holidayTime=t},expression:"holidayTime"}})],1)]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.getholidy}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"撤销请假",visible:e.cancelHolidy},on:{"update:visible":function(t){e.cancelHolidy=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.cancelform,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"学生信息："}},[a("el-row",[a("span",[e._v(e._s(e.cancelform.person_name)+" "+e._s(e.cancelform.grade_name)+" "+e._s(e.cancelform.class_name))])])],1),e._v(" "),a("el-form-item",{attrs:{label:"请假时间："}},[a("el-row",[a("span",[e._v(e._s(e.cancelform.holiday_date))])])],1),e._v(" "),a("el-form-item",{attrs:{label:"撤销原因："}},[a("el-row",[a("el-input",{attrs:{placeholder:"撤销原因"},model:{value:e.cancelform.cancel_reason,callback:function(t){e.$set(e.cancelform,"cancel_reason",t)},expression:"cancelform.cancel_reason"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.cancelHolidy=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.cancelHolidyflag()}}},[e._v("提交")])],1)],1)],1)},l=[],o=(a("6b54"),a("b775"));function i(e){return Object(o["a"])({url:"/school/holidy/holidyList",method:"get",params:e})}function s(e){return Object(o["a"])({url:"/school/holidy/holidyPage",method:"get",params:e})}function r(e){return Object(o["a"])({url:"/school/holidy/holidayExcel",method:"post",data:e})}var c=a("23ba"),u=a("8975"),d=a("c9d9"),f=a("6724"),p=(a("ed08"),a("333d")),m={name:"ComplexTable",components:{Pagination:p["a"]},directives:{waves:f["a"]},data:function(){return{thButtonInfo:[],thPageInfo:[],tableKey:0,list:null,total:0,listLoading:!0,listQuery:{page:1,num:10,person_name:null,class_name:null,grade_name:null,group_name:null,holiday_type:null,holiday_date:null},group_show:null,holidayTime:"",dialogFormVisible:!1,cancelHolidy:!1,cancelform:{self_id:null,class_name:null,grade_name:null,holiday_type:null,holiday_date:null,person_name:null,cancel_reason:null},formLabelWidth:"120px",groupOption:[],self_id:"",fileList:[],returnUrl:""}},created:function(){var e=this;this.getList(),i().then((function(t){e.thButtonInfo=t.data.button_info,e.thPageInfo=t.data.page_info}))},methods:{getList:function(){var e=this;this.listLoading=!0,s(this.listQuery).then((function(t){e.list=t.data.items,e.total=t.data.total,e.group_show=t.data.group_show,e.listLoading=!1}))},use_flag123:function(e,t){return Object(u["a"])(e,t.toString())},handleFilter:function(){this.listQuery.page=1,this.getList()},importExcel:function(){var e=this;Object(c["a"])().then((function(t){t.data.items.length>0&&(e.groupOption=t.data.items,e.dialogFormVisible=!0)}))},handlePreview:function(e){console.log(e)},handleRemove:function(e,t){},onFilter:function(){this.getList()},onThBtnClick:function(e){"export"==e.use_type&&this.importExcel()},onRowBtnClick:function(e,t,a){var n=this;a.use_type==d["a"].ajax?"use_flag"==a.flag?(this.cancelHolidy=!0,this.cancelform.class_name=e.class_name,this.cancelform.grade_name=e.grade_name,this.cancelform.holiday_type=e.holiday_type,this.cancelform.holiday_date=e.holiday_date,this.cancelform.person_name=e.person_name,this.cancelform.self_id=e.self_id):"delete_flag"==a.flag&&deleteCar(e.self_id).then((function(e){n.$notify({title:"成功",message:e.msg,type:"success",duration:2e3}),n.list.splice(t,1)})):a.use_type==d["a"].edit&&this.$router.push({path:a.jump_url,query:{id:e.self_id}})},getholidy:function(){var e=this;if(this.cancelform.self_id){var t={holidayTime:this.holidayTime,group_code:this.self_id};r(t).then((function(t){window.location.href=t.data.url,e.$message({message:t.msg,type:"success",center:!0}),setTimeout((function(){e.getList(),e.dialogFormVisible=!1,e.value1=""}),1e3)}))}else this.$message({message:"请选择公司",type:"warning",center:!0})},cancelHolidyflag:function(){var e=this;if(this.cancelform.self_id){var t={self_id:this.cancelform.self_id,cancel_reason:this.cancelform.cancel_reason};(void 0)(t).then((function(t){e.$message({message:t.msg,type:"success",center:!0}),setTimeout((function(){e.getList(),e.cancelHolidy=!1}),1e3)}))}else this.$message({message:"数据错误",type:"warning",center:!0})}}},_=m,h=(a("077d"),a("4488"),a("2877")),v=Object(h["a"])(_,n,l,!1,null,"22fc1450",null);t["default"]=v.exports},4488:function(e,t,a){"use strict";a("218a")},6724:function(e,t,a){"use strict";a("8d41");var n="@@wavesContext";function l(e,t){function a(a){var n=Object.assign({},t.value),l=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),o=l.ele;if(o){o.style.position="relative",o.style.overflow="hidden";var i=o.getBoundingClientRect(),s=o.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":(s=document.createElement("span"),s.className="waves-ripple",s.style.height=s.style.width=Math.max(i.width,i.height)+"px",o.appendChild(s)),l.type){case"center":s.style.top=i.height/2-s.offsetHeight/2+"px",s.style.left=i.width/2-s.offsetWidth/2+"px";break;default:s.style.top=(a.pageY-i.top-s.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",s.style.left=(a.pageX-i.left-s.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return s.style.backgroundColor=l.color,s.className="waves-ripple z-active",!1}}return e[n]?e[n].removeHandle=a:e[n]={removeHandle:a},a}var o={bind:function(e,t){e.addEventListener("click",l(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[n].removeHandle,!1),e.addEventListener("click",l(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[n].removeHandle,!1),e[n]=null,delete e[n]}},i=function(e){e.directive("waves",o)};window.Vue&&(window.waves=o,Vue.use(i)),o.install=i;t["a"]=o},8975:function(e,t,a){"use strict";function n(e,t){var a="";switch(t){case"1":switch(e){case"Y":a="<font color='green'>启用</font>";break;case"N":a="<font color='red'>禁用</font>";break}break;case"2":switch(e){case"Y":a="<font color='green'>启用</font>";break;case"N":a="<font color='red'>禁用</font>";break}break;case"3":switch(e){case"Y":a="<font color='green'>启用</font>";break;case"N":a="<font color='red'>禁用</font>";break;case"W":a="<font color='red'>待审核</font>";break;case"X":a="<font color='red'>审核未通过</font>";break}break;case"4":switch(e){case"Y":a="<font color='green'>启用</font>";break;case"N":a="<font color='red'>禁用</font>";break}break;case"5":switch(e){case"Y":a="<font color='green'>启用</font>";break;case"N":a="<font color='red'>禁用</font>";break}break;case"6":switch(e){case"Y":a="<font color='green'>可以</font>";break;case"N":a="<font color='red'>不可以</font>";break}break;case"7":switch(e){case"Y":a="<font color='green'>启用</font>";break;case"N":a="<font color='red'>禁用</font>";break}break}return a}a.d(t,"a",(function(){return n}))},"8d41":function(e,t,a){},aa77:function(e,t,a){var n=a("5ca1"),l=a("be13"),o=a("79e5"),i=a("fdef"),s="["+i+"]",r="​",c=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),d=function(e,t,a){var l={},s=o((function(){return!!i[e]()||r[e]()!=r})),c=l[e]=s?t(f):i[e];a&&(l[a]=c),n(n.P+n.F*s,"String",l)},f=d.trim=function(e,t){return e=String(l(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(u,"")),e};e.exports=d},c5f6:function(e,t,a){"use strict";var n=a("7726"),l=a("69a8"),o=a("2d95"),i=a("5dbc"),s=a("6a99"),r=a("79e5"),c=a("9093").f,u=a("11e9").f,d=a("86cc").f,f=a("aa77").trim,p="Number",m=n[p],_=m,h=m.prototype,v=o(a("2aeb")(h))==p,y="trim"in String.prototype,g=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=y?t.trim():f(t,3);var a,n,l,o=t.charCodeAt(0);if(43===o||45===o){if(a=t.charCodeAt(2),88===a||120===a)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:n=2,l=49;break;case 79:case 111:n=8,l=55;break;default:return+t}for(var i,r=t.slice(2),c=0,u=r.length;c<u;c++)if(i=r.charCodeAt(c),i<48||i>l)return NaN;return parseInt(r,n)}}return+t};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof m&&(v?r((function(){h.valueOf.call(a)})):o(a)!=p)?i(new _(g(t)),a,m):g(t)};for(var b,w=a("9e1e")?c(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;w.length>k;k++)l(_,b=w[k])&&!l(m,b)&&d(m,b,u(_,b));m.prototype=h,h.constructor=m,a("2aba")(n,p,m)}},c9d9:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={ajax:"ajax",wicket:"wicket",edit:"edit"}},e87a:function(e,t,a){},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);