(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c1da67e0"],{"09f4":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),Math.easeInOutQuad=function(e,t,n,a){return e/=a/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)};var a=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function l(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function i(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(e,t,n){var o=i(),s=e-o,r=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=r;var i=Math.easeInOutQuad(c,o,s,t);l(i),c<t?a(e):n&&"function"===typeof n&&n()};u()}},"0f28":function(e,t,n){"use strict";function a(){var e="".concat(window.location.origin).concat("/prod-api","/up/img");return e}n.d(t,"a",(function(){return a}))},"2e1a":function(e,t,n){},5096:function(e,t,n){"use strict";n("2e1a")},6724:function(e,t,n){"use strict";n("8d41");var a="@@wavesContext";function l(e,t){function n(n){var a=Object.assign({},t.value),l=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},a),i=l.ele;if(i){i.style.position="relative",i.style.overflow="hidden";var o=i.getBoundingClientRect(),s=i.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":(s=document.createElement("span"),s.className="waves-ripple",s.style.height=s.style.width=Math.max(o.width,o.height)+"px",i.appendChild(s)),l.type){case"center":s.style.top=o.height/2-s.offsetHeight/2+"px",s.style.left=o.width/2-s.offsetWidth/2+"px";break;default:s.style.top=(n.pageY-o.top-s.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",s.style.left=(n.pageX-o.left-s.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return s.style.backgroundColor=l.color,s.className="waves-ripple z-active",!1}}return e[a]?e[a].removeHandle=n:e[a]={removeHandle:n},n}var i={bind:function(e,t){e.addEventListener("click",l(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[a].removeHandle,!1),e.addEventListener("click",l(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[a].removeHandle,!1),e[a]=null,delete e[a]}},o=function(e){e.directive("waves",i)};window.Vue&&(window.waves=i,Vue.use(o)),i.install=o;t["a"]=i},"8d41":function(e,t,n){},ab72:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"table-header header-fixed"},[n("div",{staticClass:"flex-space-between table-title-container"},[n("div",[e._v("费用结算列表")]),e._v(" "),n("div",e._l(e.thButtonInfo,(function(t){return n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],key:t.id,staticClass:"filter-item",style:[{backgroundColor:t.color,color:"white"}],attrs:{size:"mini",icon:t.img},on:{click:function(n){return e.onThBtnClick(t)}}},[e._v("\n          "+e._s("icon"==t.show_flag?null:t.name)+"\n        ")])})),1)]),e._v(" "),n("div",{staticClass:"filter-container"},[n("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择公司",clearable:"",filterable:""},on:{change:e.getCompanysAdd},model:{value:e.listQuery.group_code,callback:function(t){e.$set(e.listQuery,"group_code",t)},expression:"listQuery.group_code"}},e._l(e.groupOption,(function(e){return n("el-option",{key:e.self_id,attrs:{label:e.group_name,value:e.group_code}})})),1),e._v(" "),n("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择业务公司",clearable:"",filterable:""},model:{value:e.listQuery.company_id,callback:function(t){e.$set(e.listQuery,"company_id",t)},expression:"listQuery.company_id"}},e._l(e.companyOption,(function(e){return n("el-option",{key:e.self_id,attrs:{label:e.company_name,value:e.self_id}})})),1),e._v(" "),n("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择仓库",clearable:"",filterable:""},model:{value:e.listQuery.warehouse_id,callback:function(t){e.$set(e.listQuery,"warehouse_id",t)},expression:"listQuery.warehouse_id"}},e._l(e.warehouseOption,(function(e){return n("el-option",{key:e.key,attrs:{label:e.warehouse_name,value:e.self_id}})})),1),e._v(" "),n("el-select",{staticClass:"filter-item",staticStyle:{width:"130px"},attrs:{placeholder:"状态",clearable:""},model:{value:e.listQuery.gathering_flag,callback:function(t){e.$set(e.listQuery,"gathering_flag",t)},expression:"listQuery.gathering_flag"}},e._l(e.gatheringFflagOptions,(function(e){return n("el-option",{key:e.key,attrs:{label:e.label,value:e.key}})})),1),e._v(" "),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onFilter}},[e._v("\n        查找\n      ")])],1)]),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"所属公司","min-width":"200px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return n("div",{staticClass:"flex-column"},[n("span",[e._v(e._s(a.group_name))])])}}])}),e._v(" "),n("el-table-column",{attrs:{label:"业务公司","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return n("div",{staticClass:"flex-column"},[n("span",[e._v(e._s(a.company_name))])])}}])}),e._v(" "),n("el-table-column",{attrs:{label:"仓库名称","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return n("div",{staticClass:"flex-column"},[n("span",[e._v(e._s(a.warehouse_name))])])}}])}),e._v(" "),n("el-table-column",{attrs:{label:"应收款","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return n("div",{staticClass:"flex-column"},[n("span",[e._v(e._s(a.receivable_money))])])}}])}),e._v(" "),n("el-table-column",{attrs:{label:"实际收款","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return n("div",{staticClass:"flex-column"},[n("span",[e._v(e._s(a.practical_money))])])}}])}),e._v(" "),n("el-table-column",{attrs:{label:"创建人及创建时间","min-width":"200px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return n("div",{staticClass:"flex-column"},[n("span",[e._v(e._s(a.create_user_name)+"  "+e._s(a.create_time))])])}}])}),e._v(" "),n("el-table-column",{attrs:{label:"状态",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return n("div",{staticClass:"flex-column"},[n("span",[e._v(e._s(a.gathering_show))])])}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作","min-width":"200","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row,l=t.$index;return e._l(a.button_info,(function(t){return n("div",{key:t.id,staticStyle:{display:"inline-block"}},["text"==t.show_flag&&null==t.img?n("el-button",{staticStyle:{padding:"3px","margin-right":"5px"},attrs:{size:"mini",plain:"",type:t.but_type},on:{click:function(n){return e.onRowBtnClick(a,l,t)}}},[e._v("\n            "+e._s(t.name))]):e._e(),e._v(" "),"icon"==t.show_flag?n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.name,placement:"bottom-start"}},[n("el-button",{staticStyle:{"margin-right":"5px"},attrs:{type:t.but_type,icon:t.img,circle:""},on:{click:function(n){return e.onRowBtnClick(a,l,t)}}})],1):e._e(),e._v(" "),"text"!==t.show_flag&&null!==t.img&&"icon"!==t.show_flag?n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.name,placement:"bottom-start"}},[n("i",{class:t.img,style:[{marginRight:"5px",color:t.color,fontSize:"15px"}],attrs:{size:"mini",circle:""},on:{click:function(n){return e.onRowBtnClick(a,l,t)}}})]):e._e()],1)}))}}])})],1),e._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,"page-sizes":e.thPageInfo,page:e.listQuery.page,limit:e.listQuery.num},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"num",t)},pagination:e.getList}}),e._v(" "),n("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,width:"900px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"dataForm",staticStyle:{"margin-left":"50px"},attrs:{model:e.temp,"label-width":"100px"}},[n("el-row",[n("el-col",{staticStyle:{"min-width":"250px"},attrs:{span:8}},[n("el-form-item",{attrs:{label:"所属公司",prop:"text"}},[n("el-input",{staticClass:"filter-item",attrs:{disabled:null!=e.temp.group_code},model:{value:e.temp.group_code,callback:function(t){e.$set(e.temp,"group_code",t)},expression:"temp.group_code"}})],1)],1),e._v(" "),n("el-col",{staticStyle:{"min-width":"250px"},attrs:{span:8}},[n("el-form-item",{attrs:{label:"业务公司",prop:"text"}},[n("el-input",{staticClass:"filter-item",attrs:{disabled:null!=e.temp.group_code},model:{value:e.temp.company_name,callback:function(t){e.$set(e.temp,"company_name",t)},expression:"temp.company_name"}})],1)],1),e._v(" "),n("el-col",{staticStyle:{"min-width":"250px"},attrs:{span:8}},[n("el-form-item",{attrs:{label:"仓库名称",prop:"text"}},[n("el-input",{staticClass:"filter-item",attrs:{disabled:null!=e.temp.group_code},model:{value:e.temp.warehouse_name,callback:function(t){e.$set(e.temp,"warehouse_name",t)},expression:"temp.warehouse_name"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{staticStyle:{"min-width":"200px"},attrs:{span:8}},[n("el-form-item",{attrs:{label:"应收款",prop:"text"}},[n("el-input",{staticClass:"filter-item",attrs:{disabled:null!=e.temp.group_code},model:{value:e.temp.receivable_money,callback:function(t){e.$set(e.temp,"receivable_money",t)},expression:"temp.receivable_money"}})],1)],1),e._v(" "),n("el-col",{staticStyle:{"min-width":"200px"},attrs:{span:8}},[n("el-form-item",{attrs:{label:"实收款",prop:"text"}},[n("el-input",{staticClass:"filter-item",attrs:{disabled:null!=e.temp.group_code},model:{value:e.temp.practical_money,callback:function(t){e.$set(e.temp,"practical_money",t)},expression:"temp.practical_money"}})],1)],1),e._v(" "),n("el-col",{staticStyle:{"min-width":"200px"},attrs:{span:8}},[n("el-form-item",{attrs:{label:"收款金额",prop:"text"}},[n("el-input",{staticClass:"filter-item",model:{value:e.temp.money,callback:function(t){e.$set(e.temp,"money",t)},expression:"temp.money"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{staticStyle:{"min-width":"200px"},attrs:{span:8}},[n("el-form-item",{attrs:{label:"已收款(元)",prop:"text"}},[n("span",{staticStyle:{"font-size":"20px",color:"red"}},[e._v(e._s(e.temp.already_money))])])],1),e._v(" "),n("el-col",{staticStyle:{"min-width":"200px"},attrs:{span:8}},[n("el-form-item",{attrs:{label:"剩余收款",prop:"text"}},[n("span",{staticStyle:{"font-size":"20px",color:"red"}},[e._v(e._s(e.residue_money))])])],1)],1)],1),e._v(" "),void 0!==e.wms_settle_list&&e.wms_settle_list.length>0?n("div",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.wms_settle_list,border:"","max-height":"185px",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"实际收款"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return n("div",{staticClass:"flex-column"},[n("span",[e._v(e._s(a.money))])])}}],null,!1,2886701204)}),e._v(" "),n("el-table-column",{attrs:{label:"交易银行"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return n("div",{staticClass:"flex-column"},[n("span",[e._v(e._s(a.serial_bank_name))])])}}],null,!1,933251685)}),e._v(" "),n("el-table-column",{attrs:{label:"交易流水号"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return n("div",{staticClass:"flex-column"},[n("span",[e._v(e._s(a.serial_number))])])}}],null,!1,845734392)}),e._v(" "),n("el-table-column",{attrs:{label:"交易凭证"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return n("div",{staticClass:"flex-column"},[n("span",[e._v(e._s(a.voucher))])])}}],null,!1,2045302900)})],1)],1):e._e(),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("\n        取消\n      ")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.addGathering}},[e._v("\n        提交\n      ")])],1)],1)],1)},l=[],i=n("fb9d"),o=n("c24f"),s=(n("c9d9"),n("6724")),r=(n("ed08"),n("333d")),c=(n("bc3a"),n("5f87")),u=n("0835"),d={name:"ComplexTable",components:{Pagination:r["a"],ImageUpload:u["a"]},directives:{waves:s["a"]},filters:{statusFilter:function(e){var t={published:"success",draft:"info",deleted:"danger"};return t[e]},typeFilter:function(e){return calendarTypeKeyValue[e]}},data:function(){return{thImportInfo:[],thButtonInfo:[],thPageInfo:[],tableKey:0,list:null,wms_settle_list:[],total:0,listLoading:!0,keyInfo:[],voucher:[],groupOption:[],warehouseOption:[],companyOption:[],file_id:"",self_id:"",fileList:[],returnUrl:"",listQuery:{page:1,limit:20,start_time:null,end_time:null,group_code:null,company_id:null,warehouse_id:null},gatheringFflagOptions:[{key:"ALL",label:"全部"},{key:"Y",label:"已完成收款"},{key:"N",label:"未完成收款"}],title2:null,title:null,dialogFormVisible:!1,dialogUpdateVisible:!1,packExport:!1,packExcel:!1,temp:{warehouse_name:null,practical_money:null,money:null,serial_bank_name:null,serial_number:null,group_code:null,self_id:null,receivable_money:null,already_money:null,residue_money:"",price:null},aHtml:""}},computed:{residue_money:function(){var e,t=""==this.temp.practical_money?0:this.temp.practical_money,n=""==this.temp.already_money?0:this.temp.already_money;return e=parseFloat(t)-parseFloat(n),this.temp.residue_money=e,console.log(this.temp.residue_money),e}},created:function(){var e=this;this.getList(),Object(i["f"])().then((function(t){e.thButtonInfo=t.data.button_info,e.thPageInfo=t.data.page_info})),this.getGroup()},methods:{getList:function(){var e=this;this.listLoading=!0,Object(i["g"])(this.listQuery).then((function(t){e.list=t.data.items,e.total=t.data.total,e.listLoading=!1}))},onThBtnClick:function(e){"settle"==e.flag&&this.$router.push({path:"/wms/settle/create_settle",query:{id:null}})},onRowBtnClick:function(e,t,n){"gathering"==n.flag?(this.dialogFormVisible=!0,this.title="创建收款条",this.createGathering(e.self_id)):"details"==n.flag?this.$router.push({path:"/wms/settle/details",query:{id:e.self_id}}):"modify"==n.use_type&&(this.dialogUpdateVisible=!0,this.title="修改金额",this.temp.receivable_money=e.receivable_money,this.temp.self_id=e.self_id)},getGroup:function(){var e=this;Object(o["l"])().then((function(t){e.groupOption=t.data.items}))},getCompanysAdd:function(e){var t=this;Object(o["h"])(e).then((function(e){t.companyOption=e.data.info,t.listQuery.company_id=null,t.listQuery.warehouse_id=null})),Object(o["t"])(e).then((function(e){t.warehouseOption=e.data}))},onFilter:function(){this.listQuery.page=1,this.getList()},handlePreview:function(e){console.log(e)},handleRemove:function(e,t){},uploadUrl:function(){var e="".concat(window.location.origin).concat("/prod-api","/up/execl");return e},uploadHeaders:function(){return{dtoken:Object(c["a"])()}},onSuccess:function(e,t,n){this.file_id=e.data.self_id,this.returnUrl=e.data.pathurl},createGathering:function(e){var t=this;Object(i["c"])(e).then((function(e){t.temp.self_id=e.data.info.self_id,t.temp.company_id=e.data.info.company_id,t.temp.group_code=e.data.info.group_name,t.temp.company_name=e.data.info.company_name,t.temp.warehouse_name=e.data.info.warehouse_name,t.temp.practical_money=e.data.info.practical_money,t.temp.money=e.data.info.money,t.temp.serial_bank_name=e.data.info.serial_bank_name,t.temp.receivable_money=e.data.info.receivable_money,t.temp.already_money=e.data.info.already_money,t.temp.serial_number=e.data.info.serial_number,t.wms_settle_list=e.data.info.wms_settle_list}))},addGathering:function(){var e=this,t={self_id:this.temp.self_id,money:this.temp.money,serial_bank_name:this.temp.serial_bank_name,serial_number:this.temp.serial_number};Object(i["a"])(t).then((function(t){e.$notify({title:"Success",message:t.msg,type:"success",duration:2e3}),e.dialogFormVisible=!1,e.getList()}))}}},m=d,p=(n("5096"),n("2877")),f=Object(p["a"])(m,a,l,!1,null,null,null);t["default"]=f.exports},c9d9:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={ajax:"ajax",wicket:"wicket",edit:"edit"}},fb9d:function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return u}));var a=n("b775");function l(e){return Object(a["a"])({url:"/wms/settle/settleList",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/wms/settle/settlePage",method:"get",params:e})}function o(e){return Object(a["a"])({url:"/wms/settle/details",method:"get",params:{self_id:e}})}function s(e){return Object(a["a"])({url:"/wms/settle/createGathering",method:"post",data:{self_id:e}})}function r(e){return Object(a["a"])({url:"/wms/settle/addGathering",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/wms/settle/createSettle",method:"post",data:{company_id:e}})}function u(e){return Object(a["a"])({url:"/wms/settle/addSettle",method:"post",data:e})}}}]);