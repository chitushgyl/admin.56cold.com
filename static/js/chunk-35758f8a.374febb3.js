(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35758f8a"],{"1fc7":function(e,t,n){"use strict";n("f5d6")},"8e51":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"table-header header-fixed"},[n("div",{staticClass:"flex-space-between table-title-container"},[n("div",{staticStyle:{display:""}},[e._v("\n        菜单权限\n        "),n("el-input",{staticStyle:{width:"200px"},attrs:{readonly:"readonly",disabled:e.type},model:{value:e.company_info.group_name,callback:function(t){e.$set(e.company_info,"group_name",t)},expression:"company_info.group_name"}})],1)])]),e._v(" "),n("el-form",{ref:"form",staticStyle:{"margin-top":"20px"},attrs:{model:e.form}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{staticClass:"pan",attrs:{span:12}},[n("el-tree",{ref:"tree",attrs:{data:e.menu_info,"show-checkbox":"","default-checked-keys":e.checkIds,"check-on-click-node":"","node-key":"id","highlight-current":"",props:e.defaultProps,"check-strictly":!1},on:{"check-change":e.handleCheckChange}})],1),e._v(" "),n("el-col",{staticClass:"pan",attrs:{span:12}},[n("el-form-item",{attrs:{label:"管理数据"}},[n("el-select",{attrs:{multiple:"",placeholder:"请选择数据",filterable:!0,disabled:e.type},model:{value:e.form.groupCodes,callback:function(t){e.$set(e.form,"groupCodes",t)},expression:"form.groupCodes"}},e._l(e.group_info,(function(e,t){return n("el-option",{key:t,attrs:{value:e.group_code,label:e.group_name}})})),1)],1)],1)],1),e._v(" "),0==e.type?n("el-form-item",{staticStyle:{"text-align":"center","margin-top":"20px"}},[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")]),e._v(" "),n("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1):e._e(),e._v(" "),1==e.type?n("el-form-item",{staticStyle:{"text-align":"center","margin-top":"20px"}},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1):e._e()],1)],1)},o=[],i=n("a053"),r={data:function(){return{company_info:[],menu_info:[],group_info:[],checkIds:[],form:{groupCodes:[]},defaultProps:{children:"children",label:"name",disabled:this.disabledFn},type:null}},created:function(){this.self_id=this.$route.query.id,console.log(this.$route.query.type),"none"==this.$route.query.type?this.type=!0:this.type=!1,this.getList()},methods:{disabledFn:function(){return 1==this.type},getList:function(){var e=this;this.listLoading=!0,Object(i["b"])(this.self_id).then((function(t){e.company_info=t.data.company_info,e.group_info=t.data.group_info,e.menu_info=t.data.menu_info,e.checkIds=t.data.leaf_id,e.form.groupCodes=t.data.yiyou_group_id}))},nodeClick:function(e,t){vm.childNodesChange(t),vm.parentNodesChange(t)},childNodesChange:function(e){for(var t=e.childNodes.length,n=0;n<t;n++)e.childNodes[n].checked=!1,vm.childNodesChange(e.childNodes[n])},parentNodesChange:function(e){if(e.parent)for(var t in e)"parent"==t&&(e[t].checked=!0,vm.parentNodesChange(e[t]))},handleCheckChange:function(){this.$refs.tree.getCheckedNodes()},onSubmit:function(){var e=this,t=this.$refs.tree.getCheckedKeys(),n=this.$refs.tree.getHalfCheckedKeys(),a=n.concat(t),o={self_id:this.self_id,group_id:this.form.groupCodes,menu_id:a,leaf_id:t};Object(i["a"])(o).then((function(t){e.$message({message:"权限设定成功！",type:"success",center:!0}),setTimeout((function(){e.$router.go(-1)}),1e3)}))}}},s=r,c=(n("1fc7"),n("2877")),d=Object(c["a"])(s,a,o,!1,null,null,null);t["default"]=d.exports},a053:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}));var a=n("b775");function o(e){return Object(a["a"])({url:"/company/administrate/administrateList",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/company/administrate/administratePage",method:"get",params:e})}function r(e){return Object(a["a"])({url:"/company/administrate/createAdministrate",method:"get",params:{self_id:e}})}function s(e){return Object(a["a"])({url:"/company/administrate/addAdministrate",method:"post",data:e})}},f5d6:function(e,t,n){}}]);