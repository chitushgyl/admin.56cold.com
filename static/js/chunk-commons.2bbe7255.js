(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-commons"],{"0835":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"image-upload-container"},[e.title?i("div",{staticClass:"title"},[e._v(e._s(e.title)+" "),e.showLimit?i("span",[e._v("最多上传"+e._s(e.limit)+"张照片")]):e._e()]):e._e(),e._v(" "),i("div",{staticClass:"images-container"},[i("draggable",{attrs:{options:{animation:150,ghostClass:"sortable-ghost",chosenClass:"chosenClass",scroll:!0,scrollSensitivity:200}},on:{end:e.onDragEnd},model:{value:e.banner_list,callback:function(t){e.banner_list=t},expression:"banner_list"}},e._l(e.banner_list,(function(t,a){return i("div",{key:a,staticClass:"image-item",style:{backgroundImage:"url("+t.url+")"},on:{click:function(i){return e.handlePreview(t)},mouseover:function(e){e.preventDefault(),t.is_hover=!0},mouseleave:function(e){e.preventDefault(),t.is_hover=!1}}},[i("img",{staticClass:"el-upload-list__item-thumbnail image-item",attrs:{src:t.url}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.is_hover,expression:"!item.is_hover"}],staticClass:"label"},[i("i",{staticClass:"el-icon-upload-success el-icon-check icon-success"})]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.is_hover,expression:"item.is_hover"}],staticClass:"mask"},[i("i",{staticClass:"el-icon-delete bin",on:{click:function(t){return t.stopPropagation(),e.handleRemove(a)}}})])])})),0),e._v(" "),i("el-upload",{directives:[{name:"show",rawName:"v-show",value:0==e.limit||e.banner_list.length<e.limit,expression:"limit == 0 || banner_list.length < limit"}],staticClass:"upload-machine",attrs:{"list-type":"picture-card",name:"inputfile",action:e.uploadUrl(),"on-error":e.uploadError,"on-success":e.uploadSuccess,headers:e.uploadHeaders(),"before-upload":e.beforeUpload,"show-file-list":!1,multiple:e.limit>1,enctype:"multipart/form-data"}},[i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl}})])],1)},n=[],s=(i("6762"),i("c5f6"),i("b76a")),o=i.n(s),r=i("0f28"),l=i("5f87"),c={name:"ImageUpload",components:{draggable:o.a},props:{list:{type:Array},title:{type:String,default:null},imageKey:{type:String,default:null},showLimit:{type:Boolean,default:!1},limit:{type:Number,default:0}},data:function(){return{banner_list:[],file_list:[],dialogImageUrl:"",dialogVisible:!1}},mounted:function(){this.banner_list=this.list.map((function(e){var t=Object.assign({},e);return t.is_hover=!1,t}))},watch:{list:function(e){if(e.length>this.limit&&0!=this.limit)return this.$message.warning("当前最多可上传".concat(this.limit,"张图片")),!1;this.banner_list=e.map((function(e){var t=Object.assign({},e);return t.is_hover=!1,t}))}},methods:{uploadUrl:function(){return Object(r["a"])()},beforeUpload:function(e){},handleExceed:function(e,t){this.$message.warning("当前最多可上传".concat(this.limit,"张图片"))},uploadHeaders:function(){return{dtoken:Object(l["a"])(),enctype:"multipart/form-data"}},uploadSuccess:function(e){this.banner_list.length>=this.limit?this.$message.warning("当前最多可上传".concat(this.limit,"张图片")):(this.banner_list.push(e.data),this.emitUpdate())},uploadError:function(){this.$message.error("上传失败，请重新上传")},handleRemove:function(e){this.banner_list.splice(e,1),this.emitUpdate()},handlePreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},onDragEnd:function(){this.emitUpdate()},emitUpdate:function(){this.$emit("update",{images:this.banner_list,imageKey:this.imageKey})}}},u=c,d=(i("1224"),i("2877")),h=Object(d["a"])(u,a,n,!1,null,"12637ce6",null);t["a"]=h.exports},1224:function(e,t,i){"use strict";i("334e")},"333d":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[i("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},n=[],s=(i("c5f6"),i("09f4")),o={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&Object(s["a"])(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&Object(s["a"])(0,800)}}},r=o,l=(i("e498"),i("2877")),c=Object(l["a"])(r,a,n,!1,null,"6af373ef",null);t["a"]=c.exports},"334e":function(e,t,i){},7456:function(e,t,i){},"81ed":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"amap-container"}},[i("el-input",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],staticClass:"input-with",staticStyle:{width:"100%"},attrs:{id:"search-input",placeholder:"请输入地址",clearable:""},on:{clear:e.handelclearInput,change:e.searaddress},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handelSearch(t)}},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}},[i("el-button",{attrs:{slot:"append",size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.handelSearch2},slot:"append"},[e._v("搜索")])],1),e._v(" "),i("div",{staticStyle:{display:"none"},attrs:{id:"searchResultPanel"}}),e._v(" "),i("el-row",{staticClass:"margin-top-10 address",staticStyle:{width:"100%",height:"30px","line-height":"30px",position:"relative"}},[e._v("\n    地理位置\n    ")]),e._v(" "),i("el-row",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"margin-top-10 address"},[e._v("\n    当前地址是： "+e._s(e.formattedAddress)+"\n    "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handelSave}},[e._v("使用该地址")])],1),e._v(" "),i("div",{staticStyle:{"margin-top":"0"},attrs:{id:"custom-amap"}})],1)},n=[],s=(i("ac6a"),i("7f7f"),i("28a5"),i("386d"),window.AMap),o={name:"AMap",props:{defaultValue:{type:String,default:""},showSearch:{type:Boolean},fathersearchValue:{type:String}},data:function(){return{map:null,formattedAddress:null,position:{},searchValue:"",placeSearch:null,searchInfoList:[],marker:"",geocoder:"",name:"",row:"",textSearch:"",isTextSearch:!1,polyEditor:null,polygon:""}},watch:{defaultValue:function(){this.searchValue=this.defaultValue},textSearch:function(e,t){}},mounted:function(){this.initMap()},beforeDestroy:function(){this.map.destroy()},methods:{initMap:function(){var e=this;this.map=new s.Map("custom-amap",{resizeEnable:!0,zoom:50}),this.map.plugin(["AMap.ToolBar","AMap.Scale","AMap.OverView"],(function(){var t=new s.ToolBar,i=new s.Scale,a=new s.OverView;e.map.addControl(t),e.map.addControl(i),e.map.addControl(a)})),this.addAmapGeocoder(),this.addAMapGeolocation(),this.addAMapAutocompletePlaceSearch()},setMaker:function(){var e=this;this.marker=new s.Marker,this.map.add(this.marker),this.map.plugin("AMap.Geocoder",(function(){e.geocoder=new s.Geocoder({city:e.defaultCity,radius:1e3})}))},addAmapGeocoder:function(){var e=this;this.setMaker(),this.map.on("click",(function(t){var i=[t.lnglat.lng,t.lnglat.lat];e.marker.setPosition(i),e.geocoder.getAddress(i,(function(t,a){if("complete"===t&&a.regeocode){var n=a.regeocode,s={address:n.formattedAddress,lat:i[1],lng:i[0],citycode:n.addressComponent.citycode,city:n.addressComponent.city};e.formattedAddress=n.formattedAddress,e.position=s,e.$emit("getPosition",s,e.row),console.log(n)}else alert(JSON.stringify(a))}))}))},addAMapGeolocation:function(){var e=this;this.map.plugin("AMap.Geolocation",(function(){var t=new s.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonOffset:new s.Pixel(200,200),zoomToAccuracy:!0,buttonPosition:"RB"});t.getCurrentPosition(),s.event.addListener(t,"complete",e.onCurrentPositionComplete),s.event.addListener(t,"error",e.onCurrentPositionError)}))},addAMapAutocompletePlaceSearch:function(){var e=this;this.map.plugin("AMap.Autocomplete",(function(){var t=new s.Autocomplete({city:e.defaultCity,input:"search-input"});s.event.addListener(t,"select",e.onSelectAutocomplete)})),s.service(["AMap.PlaceSearch"],(function(){e.placeSearch=new s.PlaceSearch({type:"",pageSize:5,pageIndex:1,city:e.defaultCity,citylimit:!1,map:e.map,panel:"searchResultPanel",autoFitView:!0})})),s.event.addListener(this.placeSearch,"listElementClick",this.onSelectSearch)},onCurrentPositionComplete:function(e){var t=[e.position.lng,e.position.lat];this.marker.setPosition(t),this.formattedAddress=e.formattedAddress,this.position=e.position},onCurrentPositionError:function(e){console.log(e)},handelSearch2:function(){var e=this;this.placeSearch.search(this.searchValue,(function(t,i){e.searchInfoList=i.poiList.pois,console.log(e.searchInfoList)}))},handelSearch:function(e,t){var i=this;this.row=t,this.polygon&&this.polyEditor&&(this.polyEditor.close(),this.polygon.hide()),this.textSearch=e,this.row.loglat?(this.marker.setPosition(this.row.loglat.split("*")),this.map.setCenter(this.row.loglat.split("*"))):this.placeSearch.search(e,(function(e,t){i.searchInfoList=t.poiList.pois}))},onSelectAutocomplete:function(e){this.searchValue=e.poi.name,this.handelSearch()},onSelectSearch:function(e){var t=e.data;this.formattedAddress=t.cityname+t.adname+t.address,this.name=t.name,this.position=t.location},handelclearInput:function(){document.querySelector("#searchResultPanel").innerHTML=""},handelSave:function(){this.searchValue=this.formattedAddress;var e=this.position,t=e.lat,i=e.lng,a={name:this.name,address:this.formattedAddress,lat:t,lng:i,city_code:this.position.city_code,city:this.position.city};this.$emit("getPosition",a)},distanceCompute:function(e){for(var t=[],i=0;i<e.length;i++){var a=e[i].loglat.split("*");t.push(a)}this.map.plugin("AMap.Driving",(function(){for(var i=new s.Driving({}),a=t.length,n=function(n){n<a-1&&i.search(new s.LngLat(t[n][0],t[n][1]),new s.LngLat(t[n+1][0],t[n+1][1]),(function(t,i){"complete"===t?(e[n+1].distance=i.routes[0].distance,e[n+1].duration=i.routes[0].time):console.log("获取驾车数据失败："+i)}))},o=0;o<t.length;o++)n(o)}))},endPolygon:function(){},getLoglat:function(e){var t="",i=JSON.parse(JSON.stringify(e));if(i&&i.length>0)return i.forEach((function(e,i){t+=e.lng+","+e.lat+";"})),t.length>0&&(t=t.substr(0,t.length-1)),t},searaddress:function(){var e=this;this.placeSearch.search(this.searchValue,(function(t,i){e.searchInfoList=i.poiList.pois,console.log(e.searchInfoList)}))}}},r=o,l=(i("e49f"),i("2877")),c=Object(l["a"])(r,a,n,!1,null,null,null);t["a"]=c.exports},e498:function(e,t,i){"use strict";i("7456")},e49f:function(e,t,i){"use strict";i("ec03")},ec03:function(e,t,i){}}]);