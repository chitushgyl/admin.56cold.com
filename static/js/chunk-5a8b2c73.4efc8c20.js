(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a8b2c73"],{"23ba":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a=n("b775");function s(t){return Object(a["a"])({url:"company/company/getGroup",method:"get",params:t})}},6779:function(t,e,n){"use strict";n("a431")},"8f3f":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-form",{ref:"form",staticStyle:{"margin-top":"20px"},attrs:{model:t.form}},[n("el-row",[n("div",{staticClass:"header"},[n("div",{staticStyle:{"margin-right":"10px"}},[t._v("创建权限")]),t._v(" "),n("el-select",{attrs:{placeholder:"请选择权限类型"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.typeOptions,(function(t,e){return n("el-option",{key:e,attrs:{value:t.value,label:t.label}})})),1),t._v(" "),n("el-select",{attrs:{placeholder:"请选择业务类型"},model:{value:t.form.business_type,callback:function(e){t.$set(t.form,"business_type",e)},expression:"form.business_type"}},t._l(t.businessTypeOptions,(function(t,e){return n("el-option",{key:e,attrs:{value:t.key,label:t.name}})})),1),t._v(" "),n("el-input",{staticStyle:{width:"280px","margin-left":"30px"},attrs:{placeholder:"请你输入权限名称，不能和已有的权限重复"},model:{value:t.form.authority_name,callback:function(e){t.$set(t.form,"authority_name",e)},expression:"form.authority_name"}})],1)]),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{staticClass:"pan",attrs:{span:12}},[n("el-tree",{ref:"tree",attrs:{data:t.cms_menu,"default-checked-keys":t.checkIds,"show-checkbox":"","node-key":"id","highlight-current":"","check-strictly":!1,props:t.defaultProps},on:{"check-change":t.handleCheckChange}})],1)],1),t._v(" "),n("el-form-item",{staticStyle:{"text-align":"center","margin-top":"20px"}},[n("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),t._v(" "),n("el-button",{on:{click:function(e){return t.$router.go(-1)}}},[t._v("取消")])],1)],1)],1)},s=[],r=n("debd"),o=(n("23ba"),{data:function(){return{self_id:null,cms_menu:[],businessTypeOptions:[],checkIds:[],groups:[],menuOptions:[],groupOptions:[],checkedMenuIds:[],typeOptions:[{value:"system",label:"主权限"},{value:"authority",label:"分权限"}],form:{authority_name:"",business_type:"",type:""},defaultProps:{children:"children",label:"name"}}},created:function(){this.self_id=this.$route.query.id,this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,Object(r["f"])(this.self_id).then((function(e){t.groupOptions=e.data.group_info,t.cms_menu=e.data.cms_menu,t.checkIds=e.data.leaf_id,t.businessTypeOptions=e.data.business_type,t.form.business_type=e.data.info.business_type,t.form.authority_name=e.data.info.authority_name,t.form.type=e.data.info.type}))},nodeClick:function(t,e){vm.childNodesChange(e),vm.parentNodesChange(e)},childNodesChange:function(t){for(var e=t.childNodes.length,n=0;n<e;n++)t.childNodes[n].checked=!1,vm.childNodesChange(t.childNodes[n])},parentNodesChange:function(t){if(t.parent)for(var e in t)"parent"==e&&(t[e].checked=!0,vm.parentNodesChange(t[e]))},handleCheckChange:function(){this.$refs.tree.getCheckedNodes()},onSubmit:function(){var t=this,e=Object.assign({},this.form);e.self_id=this.self_id;var n=this.$refs.tree.getCheckedKeys(),a=this.$refs.tree.getHalfCheckedKeys();e.menu_id=a.concat(n),e.leaf_id=n,Object(r["a"])(e).then((function(e){t.$message({message:"权限设定成功！",type:"success",center:!0}),t.$router.go(-1)}))}}}),i=o,u=(n("6779"),n("2877")),c=Object(u["a"])(i,a,s,!1,null,null,null);e["default"]=c.exports},a431:function(t,e,n){},debd:function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return r})),n.d(e,"a",(function(){return o})),n.d(e,"f",(function(){return i})),n.d(e,"e",(function(){return u})),n.d(e,"b",(function(){return c}));var a=n("b775");function s(t){return Object(a["a"])({url:"/sys/authority/authorityList",method:"get",params:t})}function r(t){return Object(a["a"])({url:"/sys/authority/authorityPage",method:"get",params:t})}function o(t){return Object(a["a"])({url:"/sys/authority/addAuthority",method:"post",data:t})}function i(t){return Object(a["a"])({url:"/sys/authority/createAuthority",method:"post",data:{self_id:t}})}function u(t){return Object(a["a"])({url:"/sys/authority/authorityUseFlag",method:"post",data:{self_id:t}})}function c(t){return Object(a["a"])({url:"/sys/authority/authorityDelFlag",method:"post",data:{self_id:t}})}}}]);