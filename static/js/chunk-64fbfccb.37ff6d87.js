(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64fbfccb"],{"09f4":function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),Math.easeInOutQuad=function(e,t,i,a){return e/=a/2,e<1?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t)};var a=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function n(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(e,t,i){var l=r(),s=e-l,o=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=o;var r=Math.easeInOutQuad(c,l,s,t);n(r),c<t?a(e):i&&"function"===typeof i&&i()};u()}},3183:function(e,t,i){},6724:function(e,t,i){"use strict";i("8d41");var a="@@wavesContext";function n(e,t){function i(i){var a=Object.assign({},t.value),n=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},a),r=n.ele;if(r){r.style.position="relative",r.style.overflow="hidden";var l=r.getBoundingClientRect(),s=r.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":(s=document.createElement("span"),s.className="waves-ripple",s.style.height=s.style.width=Math.max(l.width,l.height)+"px",r.appendChild(s)),n.type){case"center":s.style.top=l.height/2-s.offsetHeight/2+"px",s.style.left=l.width/2-s.offsetWidth/2+"px";break;default:s.style.top=(i.pageY-l.top-s.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",s.style.left=(i.pageX-l.left-s.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return s.style.backgroundColor=n.color,s.className="waves-ripple z-active",!1}}return e[a]?e[a].removeHandle=i:e[a]={removeHandle:i},i}var r={bind:function(e,t){e.addEventListener("click",n(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[a].removeHandle,!1),e.addEventListener("click",n(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[a].removeHandle,!1),e[a]=null,delete e[a]}},l=function(e){e.directive("waves",r)};window.Vue&&(window.waves=r,Vue.use(l)),r.install=l;t["a"]=r},"8d41":function(e,t,i){},aa77:function(e,t,i){var a=i("5ca1"),n=i("be13"),r=i("79e5"),l=i("fdef"),s="["+l+"]",o="​",c=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),d=function(e,t,i){var n={},s=r((function(){return!!l[e]()||o[e]()!=o})),c=n[e]=s?t(f):l[e];i&&(n[i]=c),a(a.P+a.F*s,"String",n)},f=d.trim=function(e,t){return e=String(n(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(u,"")),e};e.exports=d},c062:function(e,t,i){"use strict";i("3183")},c5f6:function(e,t,i){"use strict";var a=i("7726"),n=i("69a8"),r=i("2d95"),l=i("5dbc"),s=i("6a99"),o=i("79e5"),c=i("9093").f,u=i("11e9").f,d=i("86cc").f,f=i("aa77").trim,p="Number",m=a[p],_=m,v=m.prototype,h=r(i("2aeb")(v))==p,g="trim"in String.prototype,b=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=g?t.trim():f(t,3);var i,a,n,r=t.charCodeAt(0);if(43===r||45===r){if(i=t.charCodeAt(2),88===i||120===i)return NaN}else if(48===r){switch(t.charCodeAt(1)){case 66:case 98:a=2,n=49;break;case 79:case 111:a=8,n=55;break;default:return+t}for(var l,o=t.slice(2),c=0,u=o.length;c<u;c++)if(l=o.charCodeAt(c),l<48||l>n)return NaN;return parseInt(o,a)}}return+t};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof m&&(h?o((function(){v.valueOf.call(i)})):r(i)!=p)?l(new _(b(t)),i,m):b(t)};for(var y,w=i("9e1e")?c(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;w.length>x;x++)n(_,y=w[x])&&!n(m,y)&&d(m,y,u(_,y));m.prototype=v,v.constructor=m,i("2aba")(a,p,m)}},c9d9:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var a={ajax:"ajax",wicket:"wicket",edit:"edit"}},cc11:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"table-header header-fixed"},[i("div",{staticClass:"flex-space-between table-title-container"},[i("div",[e._v("订单列表")]),e._v(" "),i("div",e._l(e.thButtonInfo,(function(t){return i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],key:t.id,staticClass:"filter-item",style:[{backgroundColor:t.color,color:"white"}],attrs:{size:"mini",icon:t.img},on:{click:function(i){return e.onThBtnClick(t)}}},[e._v("\n\n          "+e._s("icon"==t.show_flag?null:t.name)+"\n        ")])})),1)]),e._v(" "),i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{placeholder:"商户名称"},model:{value:e.listQuery.group_name,callback:function(t){e.$set(e.listQuery,"group_name",t)},expression:"listQuery.group_name"}}),e._v(" "),i("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{placeholder:"商户订单号"},model:{value:e.listQuery.order_sn,callback:function(t){e.$set(e.listQuery,"order_sn",t)},expression:"listQuery.order_sn"}}),e._v(" "),i("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{placeholder:"客户订单号"},model:{value:e.listQuery.pay_order_sn,callback:function(t){e.$set(e.listQuery,"pay_order_sn",t)},expression:"listQuery.pay_order_sn"}}),e._v(" "),i("el-select",{staticClass:"filter-item",staticStyle:{width:"130px"},attrs:{placeholder:"状态",clearable:""},model:{value:e.listQuery.pay_status,callback:function(t){e.$set(e.listQuery,"pay_status",t)},expression:"listQuery.pay_status"}},e._l(e.useFlagOptions,(function(e){return i("el-option",{key:e.key,attrs:{label:e.label,value:e.key}})})),1),e._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onFilter}},[e._v("\n        查找\n      ")])],1)]),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:"订单信息",width:"350px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return i("div",{staticClass:"flex-column"},[i("span",[e._v(e._s(a.group_name))]),e._v(" "),i("span",[e._v(e._s(a.self_id))]),e._v(" "),i("span",[e._v(e._s(a.create_time))]),e._v(" "),i("span",[e._v(e._s(a.gather_name)+" "+e._s(a.tel)+" "+e._s(a.gather_address))])])}}])}),e._v(" "),i("el-table-column",{attrs:{label:"商品信息"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row,n=t.$index;return[void 0!==a.shop_order_list&&a.shop_order_list.length>0?i("el-collapse",{staticStyle:{background:"rgba(000,000,000,0)",border:"0"}},[i("el-collapse-item",{attrs:{title:"商品信息",name:n}},e._l(a.shop_order_list,(function(t,a){return i("div",{key:a,staticClass:"flex-row",staticStyle:{"margin-bottom":"10px"}},[i("el-image",{staticStyle:{width:"69px",height:"69px"},attrs:{src:t.good_img}}),e._v(" "),i("div",{staticClass:"flex-column",staticStyle:{"margin-left":"10px"}},[i("span",[e._v("产品名称:"+e._s(t.good_title))]),e._v(" "),i("span",[e._v("价格:"+e._s(t.prices))]),e._v(" "),i("div",{staticClass:"flex-row"},[i("span",[e._v("应发数量:"+e._s(t.number))]),e._v(" "),i("span",{staticStyle:{"margin-left":"10px"}},[e._v("实发数量:"+e._s(t.real_nubmer))])])])],1)})),0)],1):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"状态","class-name":"status-col",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("span",{style:{color:a.pay_status_color}},[e._v(e._s(a.pay_status_text))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"操作","min-width":"200","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row,n=t.$index;return e._l(a.button_info,(function(t){return i("div",{key:t.id,staticStyle:{display:"inline-block"}},["text"==t.show_flag&&null==t.img?i("el-button",{staticStyle:{padding:"3px","margin-right":"5px"},attrs:{size:"mini",plain:"",type:t.but_type},on:{click:function(i){return e.onRowBtnClick(a,n,t)}}},[e._v(e._s(t.name))]):e._e(),e._v(" "),"icon"==t.show_flag?i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.name,placement:"bottom-start"}},[i("el-button",{staticStyle:{"margin-right":"5px"},attrs:{type:t.but_type,icon:t.img,circle:""},on:{click:function(i){return e.onRowBtnClick(a,n,t)}}})],1):e._e(),e._v(" "),"text"!==t.show_flag&&null!==t.img&&"icon"!==t.show_flag?i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.name,placement:"bottom-start"}},[i("i",{class:t.img,style:[{marginRight:"5px",color:t.color,fontSize:"15px"}],attrs:{size:"mini",circle:""},on:{click:function(i){return e.onRowBtnClick(a,n,t)}}})]):e._e()],1)}))}}])})],1),e._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,"page-sizes":e.thPageInfo,page:e.listQuery.page,limit:e.listQuery.num},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"num",t)},pagination:e.getList}}),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogFormVisible,title:e.dialogTitle,width:"70%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"dataForm",staticStyle:{width:"100%"},attrs:{model:e.form,"label-position":"left","label-width":"80px",inline:!0}},[i("el-row",[i("el-form-item",{attrs:{label:"选择快递:"}},[i("el-select",{attrs:{placeholder:"请选择快递"},model:{value:e.form.fastMail,callback:function(t){e.$set(e.form,"fastMail",t)},expression:"form.fastMail"}},e._l(e.fastMail,(function(e,t){return i("el-option",{key:t,attrs:{value:e.key,label:e.name}})})),1)],1),e._v(" "),i("el-form-item",[i("el-input",{attrs:{placeholder:"输入物流单号"},model:{value:e.form.deliver_sn,callback:function(t){e.$set(e.form,"deliver_sn",t)},expression:"form.deliver_sn"}})],1),e._v(" "),i("div",{staticClass:"flex-space-between table-title-container",staticStyle:{height:"2px"}}),e._v(" "),i("div",[i("el-table",{staticClass:"myTable",staticStyle:{width:"100%"},attrs:{data:e.deliverArr,border:"",fit:""}},[i("el-table-column",{attrs:{label:"商品信息","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("div",{staticStyle:{display:"flex"}},[i("el-input",{staticStyle:{display:"none"},attrs:{value:a.self_id}}),e._v(" "),i("div",{staticStyle:{width:"80px",height:"80px"}},[i("img",{staticStyle:{width:"100%"},attrs:{src:a.good_img,alt:""}})]),e._v(" "),i("div",{staticClass:"text-cut",staticStyle:{flex:"1",height:"80px","line-height":"80px"}},[e._v(e._s(a.good_title))])],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"应发数量"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("span",[e._v(e._s(a.number))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"已发数量"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("span",[e._v(e._s(a.real_nubmer))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"\t本次发货数量/发货原因","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("div",[i("el-input",{attrs:{placeholder:"剩余数量"},model:{value:a.can_do_number,callback:function(t){e.$set(a,"can_do_number",t)},expression:"row.can_do_number"}})],1),e._v(" "),i("div",{staticStyle:{"margin-top":"15px"}},[i("el-input",{attrs:{placeholder:"发货原因"},model:{value:a.text_reason,callback:function(t){e.$set(a,"text_reason",t)},expression:"row.text_reason"}})],1)]}}])})],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticStyle:{width:"150px",margin:"auto",display:"flex"}},[i("el-button",{attrs:{type:"success"},on:{click:e.upDate}},[e._v("保存")]),e._v(" "),i("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)])],1),e._v(" "),i("el-dialog",{attrs:{title:"新建订单",visible:e.dialogFormVisible2},on:{"update:visible":function(t){e.dialogFormVisible2=t}}},[i("el-form",{ref:"dataForm",attrs:{model:e.temp,"label-position":"left","label-width":"100px"}},[i("el-form-item",{attrs:{label:"电话",prop:"text"}},[i("el-input",{staticClass:"filter-item",model:{value:e.temp.tel,callback:function(t){e.$set(e.temp,"tel",t)},expression:"temp.tel"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"价格",prop:"text"}},[i("el-input",{staticClass:"filter-item",model:{value:e.temp.price_show,callback:function(t){e.$set(e.temp,"price_show",t)},expression:"temp.price_show"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"认购数量",prop:"text"}},[i("el-input",{staticClass:"filter-item",model:{value:e.temp.number,callback:function(t){e.$set(e.temp,"number",t)},expression:"temp.number"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible2=!1}}},[e._v("\n        取消\n      ")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addOrder()}}},[e._v("\n        提交\n      ")])],1)],1)],1)},n=[],r=i("dea0"),l=i("c9d9"),s=i("6724"),o=(i("ed08"),i("333d")),c={name:"ComplexTable",components:{Pagination:o["a"]},directives:{waves:s["a"]},filters:{statusFilter:function(e){var t={published:"success",draft:"info",deleted:"danger"};return t[e]},typeFilter:function(e){return calendarTypeKeyValue[e]}},data:function(){return{thButtonInfo:[],thPageInfo:[],tableKey:0,list:null,total:0,listLoading:!0,listQuery:{page:1,num:10,group_name:null,order_sn:null,pay_order_sn:null,pay_status:null},useFlagOptions:[{key:"Y",label:"启用"},{key:"N",label:"禁用"}],form:{fastMail:"",deliver_sn:""},fastMail:[],dialogTitle:"",dialogFormVisible:!1,deliverArr:[],order_sn:"",dialogFormVisible2:!1,temp:{tel:null,good_id:null,price:0,number:0,price_show:null}}},created:function(){var e=this;this.getList(),Object(r["e"])().then((function(t){e.thButtonInfo=t.data.button_info,e.thPageInfo=t.data.page_info,e.thAddressInfo=t.data.address_all_info}))},methods:{getList:function(){var e=this;this.listLoading=!0,Object(r["f"])(this.listQuery).then((function(t){e.list=t.data.items,e.total=t.data.total,e.listLoading=!1}))},onThBtnClick:function(e){"edit"==e.use_type?this.$router.push({path:e.jump_url}):(this.dialogFormVisible2=!0,this.createOrder())},onFilter:function(){this.listQuery.page=1,this.getList()},onRowBtnClick:function(e,t,i){var a=this;i.use_type==l["a"].ajax?"use_flag"==i.flag?changeCompanyUseFlag(e.self_id).then((function(t){e.use_flag=t.data.use_flag})):"delete_flag"==i.flag&&deleteGoods(e.self_id).then((function(e){a.$notify({title:"成功",message:e.msg,type:"success",duration:2e3}),a.list.splice(t,1)})):i.use_type==l["a"].wicket?(this.form.fastMail="",this.form.deliver_sn="",this.dialogTitle="处理订单的发货：".concat(e.self_id),this.order_sn=e.self_id,this.createDeliver(e.self_id)):i.use_type==l["a"].update?this.$router.push({path:"/order/edit",query:{id:e.self_id}}):i.use_type==l["a"].edit&&this.$router.push({path:"/order/edit",query:{self_id:e.self_id}})},createDeliver:function(e){var t=this,i={self_id:e};Object(r["a"])(i).then((function(e){t.dialogFormVisible=!0,t.fastMail=e.data.deliver_company,t.deliverArr=e.data.shop_order_list_info}))},createOrder:function(){var e=this;Object(r["d"])().then((function(t){e.temp.good_id=t.data.good_id,e.temp.price_show=t.data.price_show,e.temp.price=t.data.price}))},addOrder:function(){var e=this;Object(r["c"])(this.temp).then((function(t){e.$message({message:"提交成功！",type:"success",center:!0}),setTimeout((function(){e.dialogFormVisible2=!1,e.getList()}),500)}))},upDate:function(){var e=this;if(this.form.fastMail&&this.form.deliver_sn){var t=[];this.deliverArr.map((function(e){t.push({self_id:e.self_id,can_do_num:e.can_do_number,text_reason:e.text_reason})}));var i={order_sn:this.order_sn,deliver_company_id:this.form.fastMail,deliver_sn:this.form.deliver_sn,do_arr:JSON.stringify(t)};Object(r["b"])(i).then((function(t){e.$message({message:"提交成功！",type:"success",center:!0}),setTimeout((function(){e.dialogFormVisible=!1}),500)}))}else this.$message({message:"快递和物流单号不能为空！",type:"warning",center:!0})}}},u=c,d=(i("c062"),i("2877")),f=Object(d["a"])(u,a,n,!1,null,null,null);t["default"]=f.exports},dea0:function(e,t,i){"use strict";i.d(t,"e",(function(){return n})),i.d(t,"f",(function(){return r})),i.d(t,"a",(function(){return l})),i.d(t,"b",(function(){return s})),i.d(t,"g",(function(){return o})),i.d(t,"c",(function(){return c})),i.d(t,"d",(function(){return u}));var a=i("b775");function n(e){return Object(a["a"])({url:"/order/order/orderList",method:"get",params:e})}function r(e){return Object(a["a"])({url:"/order/order/orderPage",method:"get",params:e})}function l(e){return Object(a["a"])({url:"/order/order/createDeliver",method:"post",data:{self_id:e}})}function s(e){return Object(a["a"])({url:"/order/order/addDeliver",method:"get",params:e})}function o(e){return Object(a["a"])({url:"/order/order/orderDetails",params:{self_id:e}})}function c(e){return Object(a["a"])({url:"/order/order/addOrder",params:e})}function u(e){return Object(a["a"])({url:"/order/order/createOrder",params:{self_id:e}})}},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);