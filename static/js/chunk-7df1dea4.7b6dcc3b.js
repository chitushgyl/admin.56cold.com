(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7df1dea4"],{"0572":function(t,e,a){"use strict";a.d(e,"f",(function(){return l})),a.d(e,"g",(function(){return n})),a.d(e,"e",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return c})),a.d(e,"d",(function(){return u}));var o=a("b775");function l(t){return Object(o["a"])({url:"/marketing/coupon/couponList",method:"get",params:t})}function n(t){return Object(o["a"])({url:"/marketing/coupon/couponPage",method:"get",params:t})}function i(t){return Object(o["a"])({url:"/marketing/coupon/detailsCoupon",method:"post",data:{self_id:t}})}function s(t){return Object(o["a"])({url:"/marketing/coupon/createCoupon",method:"post",data:{self_id:t}})}function r(t){return Object(o["a"])({url:"/marketing/coupon/addCoupon",method:"post",data:t})}function c(t){return Object(o["a"])({url:"/marketing/coupon/couponDelFlag",method:"post",data:{self_id:t}})}function u(t){return Object(o["a"])({url:"/marketing/coupon/details",method:"get",params:{self_id:t}})}},"23ba":function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var o=a("b775");function l(t){return Object(o["a"])({url:"company/company/getGroup",method:"get",params:t})}},"53cf":function(t,e,a){},"54df":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[a("el-tabs",{staticStyle:{padding:"15px 0"}},[a("span",{staticStyle:{display:"inline-block",float:"left",height:"29px","line-height":"29px"}},[t._v(t._s(t.title))]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"所属公司："}},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择所属公司",disabled:null!=t.form.self_id},model:{value:t.form.group_code,callback:function(e){t.$set(t.form,"group_code",e)},expression:"form.group_code"}},t._l(t.groups,(function(t){return a("el-option",{key:t.group_code,attrs:{value:t.group_code,label:t.group_name}})})),1)],1)],1)],1),t._v(" "),a("el-tabs",{staticStyle:{"margin-bottom":"15px"},attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"基础信息"}},[a("el-row",[a("el-col",{staticStyle:{"margin-top":"5px"},attrs:{span:24}},[a("el-form-item",{attrs:{label:"优惠券标题："}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.coupon_title,callback:function(e){t.$set(t.form,"coupon_title",e)},expression:"form.coupon_title"}})],1)],1),t._v(" "),a("el-col",{staticStyle:{"margin-top":"5px"},attrs:{span:24}},[a("el-form-item",{attrs:{label:"后台备注："}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.coupon_remark,callback:function(e){t.$set(t.form,"coupon_remark",e)},expression:"form.coupon_remark"}})],1)],1),t._v(" "),a("el-col",{staticStyle:{"margin-top":"5px"},attrs:{span:24}},[a("el-form-item",{attrs:{label:"发行总量："}},[a("el-input",{attrs:{placeholder:"请输入内容",type:"number",onkeyup:'this.value=parseInt(this.value=this.value.replace(/\\D/g,""))== ""?"":this.value'},model:{value:t.form.coupon_amount,callback:function(e){t.$set(t.form,"coupon_amount",e)},expression:"form.coupon_amount"}})],1)],1)],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"领取信息"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否自提可用："}},[a("el-select",{staticStyle:{width:"350px"},attrs:{placeholder:"是否自提可用"},model:{value:t.form.use_self_lifting_flag,callback:function(e){t.$set(t.form,"use_self_lifting_flag",e)},expression:"form.use_self_lifting_flag"}},[a("el-option",{attrs:{label:"是",value:"Y"}}),t._v(" "),a("el-option",{attrs:{label:"否",value:"N"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"优惠券类型："}},[a("el-select",{staticStyle:{width:"105px"},attrs:{placeholder:"优惠券类型"},model:{value:t.form.range_type,callback:function(e){t.$set(t.form,"range_type",e)},expression:"form.range_type"}},[a("el-option",{attrs:{label:"满减",value:"reduce"}})],1),t._v(" "),a("span",{staticStyle:{display:"inline-block",width:"20px"}},[t._v("满")]),t._v(" "),a("el-input",{staticStyle:{display:"inline-block",width:"95px"},attrs:{placeholder:"请输入内容",oninput:"value=value.replace(/[^0-9.]/g,'')"},model:{value:t.form.range_condition,callback:function(e){t.$set(t.form,"range_condition",e)},expression:"form.range_condition"}}),t._v(" "),a("span",{staticStyle:{display:"inline-block",width:"20px","text-align":"center"}},[t._v("减")]),t._v(" "),a("el-input",{staticStyle:{display:"inline-block",width:"95px"},attrs:{placeholder:"请输入内容",oninput:"value=value.replace(/[^0-9.]/g,'')"},model:{value:t.form.range,callback:function(e){t.$set(t.form,"range",e)},expression:"form.range"}}),t._v(" "),a("span",{staticStyle:{display:"inline-block",width:"20px","text-align":"center"}},[t._v("元")])],1),t._v(" "),a("el-form-item",{attrs:{label:"时间类型："}},[a("el-select",{staticStyle:{width:"350px"},attrs:{placeholder:"时间类型"},on:{change:t.onTimeType},model:{value:t.form.time_type,callback:function(e){t.$set(t.form,"time_type",e)},expression:"form.time_type"}},[a("el-option",{attrs:{label:"指定日期",value:"assign"}}),t._v(" "),a("el-option",{attrs:{label:"动态日期",value:"dynamic"}})],1)],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.shows,expression:"shows"}],attrs:{label:"指定开始时间："}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticStyle:{width:"350px"},attrs:{type:"datetime",editable:!1,"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:t.form.time_start,callback:function(e){t.$set(t.form,"time_start",e)},expression:"form.time_start"}})],1)]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.shows,expression:"shows"}],attrs:{label:"指定结束时间："}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticStyle:{width:"350px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",editable:!1,placeholder:"选择日期时间"},model:{value:t.form.time_end,callback:function(e){t.$set(t.form,"time_end",e)},expression:"form.time_end"}})],1)]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.shows2,expression:"shows2"}],attrs:{label:"动态开始时间："}},[a("el-input",{staticStyle:{display:"inline-block",width:"350px"},attrs:{placeholder:"请输入天数",onkeyup:'this.value=parseInt(this.value=this.value.replace(/\\D/g,""))== ""?"":this.value'},model:{value:t.form.time_start_day,callback:function(e){t.$set(t.form,"time_start_day",e)},expression:"form.time_start_day"}}),t._v(" "),a("span",{staticStyle:{display:"inline-block",width:"120px","text-align":"center"}},[t._v("天(请输入正整数)")])],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.shows2,expression:"shows2"}],attrs:{label:"动态有效："}},[a("el-input",{staticStyle:{display:"inline-block",width:"350px"},attrs:{placeholder:"请输入天数",onkeyup:'this.value=parseInt(this.value=this.value.replace(/\\D/g,""))== ""?"":this.value'},model:{value:t.form.time_end_day,callback:function(e){t.$set(t.form,"time_end_day",e)},expression:"form.time_end_day"}}),t._v(" "),a("span",{staticStyle:{display:"inline-block",width:"120px","text-align":"center"}},[t._v("天(请输入正整数)")])],1),t._v(" "),a("el-form-item",{attrs:{label:"使用类型："}},[a("el-select",{staticStyle:{width:"350px"},attrs:{placeholder:"优惠券类型"},model:{value:t.form.use_type,callback:function(e){t.$set(t.form,"use_type",e)},expression:"form.use_type"}},t._l(t.coupon_type,(function(t){return a("el-option",{key:t.key,attrs:{value:t.key,label:t.name}})})),1)],1)],1)],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"领取限制信息"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"领取路径："}},[a("el-select",{staticStyle:{width:"350px"},attrs:{placeholder:"领取路径"},model:{value:t.form.get_way,callback:function(e){t.$set(t.form,"get_way",e)},expression:"form.get_way"}},t._l(t.get_way,(function(t){return a("el-option",{key:t.key,attrs:{value:t.key,label:t.name}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"目前状态："}},[a("el-select",{staticStyle:{width:"350px"},attrs:{placeholder:"领取路径"},on:{change:t.onCouponStatus},model:{value:t.form.coupon_status,callback:function(e){t.$set(t.form,"coupon_status",e)},expression:"form.coupon_status"}},t._l(t.coupon_state,(function(t){return a("el-option",{key:t.key,attrs:{value:t.key,label:t.name}})})),1)],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.shows3,expression:"shows3"}],attrs:{label:"领取开始时间："}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticStyle:{width:"350px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",editable:!1},model:{value:t.form.get_start_time,callback:function(e){t.$set(t.form,"get_start_time",e)},expression:"form.get_start_time"}})],1)]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.shows3,expression:"shows3"}],attrs:{label:"领取结束时间："}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticStyle:{width:"350px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",editable:!1,placeholder:"选择日期时间"},model:{value:t.form.get_end_time,callback:function(e){t.$set(t.form,"get_end_time",e)},expression:"form.get_end_time"}})],1)]),t._v(" "),a("el-form-item",{attrs:{label:"每人限领："}},[a("el-input",{staticStyle:{display:"inline-block",width:"350px"},attrs:{onkeyup:'this.value=parseInt(this.value=this.value.replace(/\\D/g,""))== ""?"":this.value',placeholder:"只能输入数字，而且第一个数字不能为0"},model:{value:t.form.get_limit_number,callback:function(e){t.$set(t.form,"get_limit_number",e)},expression:"form.get_limit_number"}}),t._v(" "),a("span",{staticStyle:{display:"inline-block",width:"20px","text-align":"center"}},[t._v("张")])],1),t._v(" "),a("el-form-item",{attrs:{label:"可赠送用户："}},[a("el-select",{staticStyle:{width:"350px"},attrs:{placeholder:"后台可赠送给用户"},model:{value:t.form.rear_give_flag,callback:function(e){t.$set(t.form,"rear_give_flag",e)},expression:"form.rear_give_flag"}},[a("el-option",{attrs:{label:"可以",value:"Y"}}),t._v(" "),a("el-option",{attrs:{label:"不可以",value:"N"}})],1)],1)],1)],1)],1)],1),t._v(" "),a("el-form-item",{staticStyle:{"text-align":"center","margin-left":"0"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:function(e){return t.$router.go(-1)}}},[t._v("取消")])],1)],1)],1)},l=[],n=(a("ac6a"),a("3b2b"),a("ade3")),i=a("0572"),s=a("23ba"),r={data:function(){var t;return{form:(t={self_id:null,group_code:null,coupon_title:null,coupon_status:"wait",coupon_amount:null,coupon_inventory:null,coupon_remark:null,get_way:null,get_limit_number:null,get_start_time:null,get_end_time:null,range_type:"reduce",range_condition:"0",range:"0",time_type:"assign",time_start_day:"0",time_end_day:"0",time_start:null,time_end:null},Object(n["a"])(t,"time_start",null),Object(n["a"])(t,"use_type","all"),Object(n["a"])(t,"use_fallticket_flag","N"),Object(n["a"])(t,"use_self_lifting_flag","Y"),Object(n["a"])(t,"rear_give_flag","Y"),t),groups:[],coupon_type:[],coupon_state:[],get_way:[],shows:!0,shows2:!1,shows3:!1,title:null}},created:function(){var t=this;this.getList(),Object(s["a"])().then((function(e){e.data.items.length>0&&(t.groups=e.data.items)}))},methods:{getList:function(){var t=this;this.self_id=this.$route.query.id,this.listLoading=!0,Object(i["c"])(this.self_id).then((function(e){null!==e.data.coupon_info?(t.form.coupon_remark=e.data.coupon_info.coupon_remark,t.form.coupon_amount=e.data.coupon_info.coupon_amount,t.form.coupon_title=e.data.coupon_info.coupon_title,t.form.use_self_lifting_flag=e.data.coupon_info.use_self_lifting_flag,t.form.range_condition=e.data.coupon_info.range_condition,t.form.range=e.data.coupon_info.range,t.form.auto_departlater=e.data.coupon_info.auto_departlater,t.form.time_start_day=e.data.coupon_info.time_start_day,t.form.time_end_day=e.data.coupon_info.time_end_day,t.form.time_start=e.data.coupon_info.time_start,t.form.time_end=e.data.coupon_info.time_end,t.form.use_type=e.data.coupon_info.use_type,t.form.time_type=e.data.coupon_info.time_type,t.form.get_way=e.data.coupon_info.get_way,t.form.coupon_status=e.data.coupon_info.coupon_status,t.form.get_limit_number=e.data.coupon_info.get_limit_number,t.form.rear_give_flag=e.data.coupon_info.rear_give_flag,t.form.get_start_time=e.data.coupon_info.get_start_time,t.form.get_end_time=e.data.coupon_info.get_end_time,t.form.self_id=e.data.coupon_info.self_id,t.form.group_code=e.data.coupon_info.group_code,t.title="修改 "+e.data.coupon_info.group_name+" 优惠券："+e.data.coupon_info.coupon_title,"assign"==t.form.time_type?(t.shows=!0,t.shows2=!1):(t.shows=!1,t.shows2=!0),"wait"==t.form.coupon_status?t.shows3=!0:t.shows3=!1):t.title="新增优惠券",t.coupon_state=e.data.coupon_state,t.coupon_type=e.data.coupon_type,t.get_way=e.data.get_way,"wait"==t.form.coupon_status?t.shows3=!0:t.shows3=!1}))},onTimeType:function(){"assign"==this.form.time_type?(this.shows=!0,this.shows2=!1):(this.shows=!1,this.shows2=!0)},onCouponStatus:function(){"wait"==this.form.coupon_status?this.shows3=!0:this.shows3=!1},createData:function(){var t=this;this.$refs["dataForm"].validate((function(e){e&&(t.temp.id=parseInt(100*Math.random())+1024,t.temp.author="vue-element-admin",createArticle(t.temp).then((function(){t.list.unshift(t.temp),t.dialogFormVisible=!1,t.$notify({title:"Success",message:"Created Successfully",type:"success",duration:2e3})})))}))},platformflag:function(){"N"==this.form.money_platform_flag?this.shows=!1:this.shows=!0},depart_auto_flag:function(){"N"==this.form.auto_depart_flag?this.shows2=!1:this.shows2=!0},BlurText:function(t){var e=new RegExp("^[1-9][0-9]*$").test(t.target.value);e||(this.$message({message:"请输入正整数",type:"warning",center:!0}),t.target.value=" ")},handleFetchPv:function(t){var e=this;fetchPv(t).then((function(t){e.pvData=t.data.pvData,e.dialogPvVisible=!0}))},onImagesUpdate:function(t){this.keyInfo.forEach((function(e){e.key==t.imageKey&&(e.images=t.images)}))},onSubmit:function(){var t=this;Object(i["a"])(this.form).then((function(e){t.$message({message:e.msg,type:"success",center:!0}),setTimeout((function(){t.$router.go(-1)}),1e3),t.loading=!1}))}}},c=r,u=(a("f5c9"),a("2877")),m=Object(u["a"])(c,o,l,!1,null,null,null);e["default"]=m.exports},f5c9:function(t,e,a){"use strict";a("53cf")}}]);