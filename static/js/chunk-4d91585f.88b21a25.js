(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d91585f"],{"23ba":function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var o=r("b775");function a(t){return Object(o["a"])({url:"company/company/getGroup",method:"get",params:t})}},"26e4":function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("el-form",{ref:"form",staticStyle:{"margin-top":"20px"},attrs:{model:t.form}},[r("el-row",[r("div",{staticClass:"header"},[r("div",{staticStyle:{"margin-right":"10px"}},[t._v("创建权限")]),t._v(" "),r("el-select",{attrs:{disabled:null!=t.self_id,placeholder:"请选择公司",read:""},on:{change:t.onGroupChanged},model:{value:t.form.group_code,callback:function(e){t.$set(t.form,"group_code",e)},expression:"form.group_code"}},t._l(t.groups,(function(t,e){return r("el-option",{key:e,attrs:{value:t.group_code,label:t.group_name}})})),1),t._v(" "),r("el-input",{staticStyle:{width:"280px","margin-left":"30px"},attrs:{placeholder:"请你输入权限名称，不能和已有的权限重复"},model:{value:t.form.authority_name,callback:function(e){t.$set(t.form,"authority_name",e)},expression:"form.authority_name"}})],1)]),t._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{staticClass:"pan",attrs:{span:12}},[t.menuOptions.length>0?r("el-tree",{ref:"tree",attrs:{data:t.menuOptions,"show-checkbox":"","default-checked-keys":t.checkedMenuIds,"node-key":"id","highlight-current":"","check-strictly":!1,props:t.defaultProps}}):t._e()],1),t._v(" "),r("el-col",{staticClass:"pan",attrs:{span:12}},[t.groupOptions.length>0?r("el-form-item",{attrs:{label:"管理数据"}},[r("el-select",{attrs:{multiple:"",placeholder:"请选择数据"},model:{value:t.form.group_id,callback:function(e){t.$set(t.form,"group_id",e)},expression:"form.group_id"}},t._l(t.groupOptions,(function(t,e){return r("el-option",{key:e,attrs:{value:t.group_code,label:t.group_name}})})),1)],1):t._e()],1)],1),t._v(" "),r("el-form-item",{staticStyle:{"text-align":"center","margin-top":"20px"}},[r("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),t._v(" "),r("el-button",{on:{click:function(e){return t.$router.go(-1)}}},[t._v("取消")])],1)],1)],1)},a=[],n=(r("28a5"),r("abbb")),i=r("23ba"),u={data:function(){return{self_id:null,groups:[],menuOptions:[],groupOptions:[],checkedMenuIds:[],whetherOptions:[{value:"Y",label:"是"},{value:"N",label:"否"}],form:{group_id:[],group_code:"",authority_name:""},defaultProps:{children:"children",label:"name"}}},created:function(){var t=this;this.self_id=this.$route.query.id,Object(i["a"])().then((function(e){t.groups=e.data.items,t.self_id&&t.getList()}))},methods:{getList:function(){var t=this;this.listLoading=!0;var e={self_id:this.self_id,group_code:this.form.group_code};Object(n["d"])(e).then((function(e){t.groupOptions=e.data.group_info,t.menuOptions=e.data.menu_info,t.checkedMenuIds=e.data.leaf_id,t.checkedGroupIds=e.data.yiyou_group_id;var r=e.data.authority;r&&(t.form={group_code:r.group_code,authority_name:r.authority_name,group_id:r.group_id.split("*")})}))},onGroupChanged:function(t){this.form.group_code=t,this.getList()},onSubmit:function(){var t=this,e=Object.assign({},this.form);e.self_id=this.self_id,e.group_code=this.form.group_code;var r=this.$refs.tree.getCheckedKeys(),o=this.$refs.tree.getHalfCheckedKeys();e.menu_id=o.concat(r),e.leaf_id=r,Object(n["c"])(e).then((function(e){t.$message({message:"权限设定成功！",type:"success",center:!0}),t.$router.go(-1)}))}}},s=u,c=(r("50d4"),r("2877")),l=Object(c["a"])(s,o,a,!1,null,null,null);e["default"]=l.exports},"50d4":function(t,e,r){"use strict";r("e789")},abbb:function(t,e,r){"use strict";r.d(e,"e",(function(){return a})),r.d(e,"f",(function(){return n})),r.d(e,"a",(function(){return i})),r.d(e,"d",(function(){return u})),r.d(e,"c",(function(){return s}));var o=r("b775");function a(t){return Object(o["a"])({url:"/staff/authority/authorityList",method:"get",params:t})}function n(t){return Object(o["a"])({url:"/staff/authority/authorityPage",method:"get",params:t})}function i(t){return Object(o["a"])({url:"/staff/authority/authorityUseFlag",method:"post",data:{self_id:t}})}function u(t){return Object(o["a"])({url:"/staff/authority/createAuthority",method:"get",params:t})}function s(t){return Object(o["a"])({url:"/staff/authority/addAuthority",method:"post",data:t})}},e789:function(t,e,r){}}]);